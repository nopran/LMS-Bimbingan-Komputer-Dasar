<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Learning TIK - MTsN 6 Pesisir Selatan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        .badge-earned { 
            filter: grayscale(0);
            transform: scale(1);
            transition: all 0.3s;
        }
        .badge-locked { 
            filter: grayscale(100%) opacity(0.3);
            transform: scale(0.9);
        }
        .badge-earned:hover {
            transform: scale(1.1);
        }
        .progress-ring {
            transition: stroke-dashoffset 0.5s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
    
        .fade-soft{animation:fadeIn .5s ease-out both}
        .hover-rise:hover{transform:translateY(-2px); transition:transform .2s ease}
        </style>
        
<style>
/* === Simple Quiz Skin (non-intrusive) === */
.quiz-skin .quiz-header{
  padding:16px;border:1px solid #e5e7eb;border-radius:14px;
  background: linear-gradient(135deg,#f5f3ff,#ecfeff);
}
.quiz-skin .quiz-title{font-weight:800;font-size:18px;color:#0f172a;margin:0;}
.quiz-skin .quiz-sub{font-size:12px;color:#475569;margin-top:4px}
.quiz-skin .quiz-progress{height:10px;border-radius:9999px;background:#e2e8f0;overflow:hidden;margin-top:10px}
.quiz-skin .quiz-progress > div{height:100%;width:0%;background:linear-gradient(90deg,#7C3AED,#38BDF8);transition:width .3s ease}
.quiz-skin .quiz-card{border:1px solid #e5e7eb;border-radius:14px;padding:16px;background:#fff}
.quiz-skin .quiz-actions button{border:1px solid #e2e8f0;border-radius:10px;padding:8px 12px;font-weight:600}
</style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md fade-in">
            <div class="text-center mb-8">
                <div class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">E-Learning TIK</h1>
                <p class="text-gray-600">MTsN 6 Pesisir Selatan</p>
                <p class="text-sm text-gray-500 mt-1">Panduan Dasar Komputer - Kelas 8</p>
            </div>
            
            <form onsubmit="login(event)" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                    <input type="text" id="username" required 
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                        placeholder="Masukkan username">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="password" required
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                        placeholder="Masukkan password">
                </div>
                <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:-translate-y-0.5 transition">
                    Masuk
                </button>
            </form>
            
            <div class="mt-6 p-4 bg-blue-50 rounded-lg text-sm">
                <p class="font-semibold text-blue-800 mb-2">Demo Login:</p>
                <p class="text-blue-700">Guru: <span class="font-mono">guru1</span> / <span class="font-mono">password123</span></p>
                <p class="text-blue-700">Siswa: <span class="font-mono">dika_viiia</span> / <span class="font-mono">pass123</span></p>
            </div>
        </div>
    </div>

    <!-- Student Dashboard -->
    <div id="studentDashboard" class="hidden">
        <!-- Navbar -->
        <nav class="bg-white shadow-lg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <div class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white w-10 h-10 rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                        </div>
                        <span class="ml-3 text-xl font-bold text-gray-800">E-Learning TIK</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-right hidden md:block">
                            <p class="text-sm font-semibold text-gray-800" id="studentNameNav"></p>
                            <p class="text-xs text-gray-600" id="studentClassNav"></p>
                        </div>
                        <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold transition">
                            Keluar
                        </button>
                    </div>
                </div>
            </div>
        </nav>
<!-- Main Content -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Dashboard Stats -->
            <div id="studentStats" class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <!-- Stats will be loaded here -->
            </div>

            <!-- Navigation Tabs -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex flex-wrap gap-2 mb-6 border-b">
                    <button onclick="showStudentTab('materi')" id="tabMateri" class="px-6 py-3 font-semibold border-b-2 border-blue-600 text-blue-600">
                        ğŸ“š Materi
                    </button>
                    <button onclick="showStudentTab('absensi')" id="tabAbsensi" class="px-6 py-3 font-semibold text-gray-600 hover:text-blue-600 transition">
                        âœ… Absensi Saya
                    </button>
                    <button onclick="showStudentTab('leaderboard')" id="tabLeaderboard" class="px-6 py-3 font-semibold text-gray-600 hover:text-blue-600 transition">
                        ğŸ† Leaderboard
                    </button>
                    <button onclick="showStudentTab('badges')" id="tabBadges" class="px-6 py-3 font-semibold text-gray-600 hover:text-blue-600 transition">
                        ğŸ–ï¸ Badge Saya
                    </button>
                    <button onclick="showStudentTab('feedback')" id="tabFeedback" class="px-6 py-3 font-semibold text-gray-600 hover:text-blue-600 transition">
                        ğŸ’¬ Feedback
                    </button>
                </div>

                <div id="tabContentMateri" class="tab-content">
                    <div id="materiList"></div>
                </div>

                <div id="tabContentAbsensi" class="tab-content hidden">
                    <div id="absensiSiswaContent"></div>
                </div>

                <div id="tabContentLeaderboard" class="tab-content hidden">
                    <div id="leaderboardContent"></div>
                </div>

                <div id="tabContentBadges" class="tab-content hidden">
                    <div id="badgesContent"></div>
                </div>

                <div id="tabContentFeedback" class="tab-content hidden">
                    <div id="feedbackForm"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Teacher Dashboard -->
    <div id="teacherDashboard" class="hidden">
        <!-- Navbar -->
        <nav class="bg-white shadow-lg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <div class="bg-gradient-to-r from-purple-600 to-pink-600 text-white w-10 h-10 rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                        </div>
                        <span class="ml-3 text-xl font-bold text-gray-800">Dashboard Guru</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-right hidden md:block">
                            <p class="text-sm font-semibold text-gray-800">Muhammad Nopran, S.Pd.</p>
                            <p class="text-xs text-gray-600">Guru TIK</p>
                        </div>
                        <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold transition">
                            Keluar
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Stats Overview -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg p-6 fade-soft hover-rise text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-blue-100 text-sm">Total Siswa</p>
                            <p class="text-3xl font-bold mt-2">32</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-3">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-lg p-6 fade-soft hover-rise text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-green-100 text-sm">Tingkat Kelulusan</p>
                            <p class="text-3xl font-bold mt-2">87%</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-3">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl shadow-lg p-6 fade-soft hover-rise text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-yellow-100 text-sm">Rata-rata Nilai</p>
                            <p class="text-3xl font-bold mt-2">76.5</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-3">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl shadow-lg p-6 fade-soft hover-rise text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-purple-100 text-sm">Rata-rata Kehadiran</p>
                            <p class="text-3xl font-bold mt-2">95%</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-3">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Class Filter -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex flex-wrap gap-4 items-center">
                    <span class="font-semibold text-gray-700">Filter Kelas:</span>
                    <button onclick="filterClass('all')" id="filterAll" class="px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold transition">
                        Semua Kelas
                    </button>
                    <button onclick="filterClass('VIIIa')" id="filterVIIIa" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition">
                        Kelas 8A
                    </button>
                    <button onclick="filterClass('VIIIb')" id="filterVIIIb" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition">
                        Kelas 8B
                    </button>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex flex-wrap gap-2 mb-6 border-b">
                    <button onclick="showTeacherTab('analytics')" id="teacherTabAnalytics" class="px-6 py-3 font-semibold border-b-2 border-purple-600 text-purple-600">
                        ğŸ“Š Analytics
                    </button>
                    <button onclick="showTeacherTab('students')" id="teacherTabStudents" class="px-6 py-3 font-semibold text-gray-600 hover:text-purple-600 transition">
                        ğŸ‘¥ Data Siswa
                    </button>
                    <button onclick="showTeacherTab('kelola-siswa')" id="teacherTabKelolaSiswa" class="px-6 py-3 font-semibold text-gray-600 hover:text-purple-600 transition">
                        â• Kelola Siswa
                    </button>
                    <button onclick="showTeacherTab('absensi')" id="teacherTabAbsensi" class="px-6 py-3 font-semibold text-gray-600 hover:text-purple-600 transition">
                        âœ… Absensi
                    </button>
                    <button onclick="showTeacherTab('feedbacks')" id="teacherTabFeedbacks" class="px-6 py-3 font-semibold text-gray-600 hover:text-purple-600 transition">
                        ğŸ’¬ Feedback Siswa
                    </button>
                </div>

                <div id="teacherTabContentAnalytics" class="tab-content">
                    <div id="analyticsContent"></div>
                </div>

                <div id="teacherTabContentStudents" class="tab-content hidden">
                    <div id="studentsTableContent"></div>
                </div>

                <div id="teacherTabContentKelolaSiswa" class="tab-content hidden">
                    <div id="kelolaSiswaContent"></div>
                </div>

                <div id="teacherTabContentAbsensi" class="tab-content hidden">
                    <div id="absensiContent"></div>
                </div>

                <div id="teacherTabContentFeedbacks" class="tab-content hidden">
                    <div id="feedbacksContent"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal untuk Materi/Kuis -->
    <div id="modalOverlay" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Data Sistem
        const SYSTEM_DATA = {
            students: [
                // Kelas VIIIa
                {username: 'dika_viiia', password: 'pass123', nama: 'DIKA SAPUTRA', kelas: 'VIIIa', gender: 'L'},
                {username: 'fino_viiia', password: 'pass123', nama: 'FINO PRATAMA', kelas: 'VIIIa', gender: 'L'},
                {username: 'ghifa_viiia', password: 'pass123', nama: 'GHIFA ADZKIYA ZULFI', kelas: 'VIIIa', gender: 'P'},
                {username: 'mardani_viiia', password: 'pass123', nama: 'MARDANI SYAFIRA', kelas: 'VIIIa', gender: 'P'},
                {username: 'denil_viiia', password: 'pass123', nama: 'MUHAMMAD DENIL', kelas: 'VIIIa', gender: 'L'},
                {username: 'fajar_viiia', password: 'pass123', nama: 'MUHAMMAD FAJAR ALFARIZI', kelas: 'VIIIa', gender: 'L'},
                {username: 'faris_viiia', password: 'pass123', nama: 'MUHAMMAD FARIS', kelas: 'VIIIa', gender: 'L'},
                {username: 'ilham_viiia', password: 'pass123', nama: 'MUHAMMAD ILHAM', kelas: 'VIIIa', gender: 'L'},
                {username: 'nizam_viiia', password: 'pass123', nama: 'MUHAMMAD NIZAM', kelas: 'VIIIa', gender: 'L'},
                {username: 'rangga_viiia', password: 'pass123', nama: 'MUHAMMAD RANGGA', kelas: 'VIIIa', gender: 'L'},
                {username: 'afni_viiia', password: 'pass123', nama: 'NUR AFNI ANNISA', kelas: 'VIIIa', gender: 'P'},
                {username: 'putri_viiia', password: 'pass123', nama: 'PUTRI NURAMIRA', kelas: 'VIIIa', gender: 'P'},
                {username: 'raffa_viiia', password: 'pass123', nama: 'RAFFA ALTRAMERO HANAFI', kelas: 'VIIIa', gender: 'L'},
                {username: 'sayyid_viiia', password: 'pass123', nama: 'SAYYID MUHAMMAD FARHAN', kelas: 'VIIIa', gender: 'L'},
                {username: 'syamira_viiia', password: 'pass123', nama: 'SYAMIRA MASLINDA', kelas: 'VIIIa', gender: 'P'},
                {username: 'wafa_viiia', password: 'pass123', nama: 'WAFA NURUL HIDAYAH', kelas: 'VIIIa', gender: 'P'},
                {username: 'zasi_viiia', password: 'pass123', nama: 'ZASI KIRANA', kelas: 'VIIIa', gender: 'P'},
                // Kelas VIIIb
                {username: 'wahid_viiib', password: 'pass123', nama: 'ABDUL WAHID AL RASYID', kelas: 'VIIIb', gender: 'L'},
                {username: 'akbar_viiib', password: 'pass123', nama: 'AKBAR HIDAYATULHAQ', kelas: 'VIIIb', gender: 'L'},
                {username: 'azkiyah_viiib', password: 'pass123', nama: 'AZKIYAH KHALIQAH', kelas: 'VIIIb', gender: 'P'},
                {username: 'brilian_viiib', password: 'pass123', nama: 'BRILIAN SATRIA RAMADHAN', kelas: 'VIIIb', gender: 'L'},
                {username: 'bunga_viiib', password: 'pass123', nama: 'BUNGA LESTARI RAHMADANI', kelas: 'VIIIb', gender: 'P'},
                {username: 'dila_viiib', password: 'pass123', nama: 'DILA ANDA PUTRI', kelas: 'VIIIb', gender: 'P'},
                {username: 'faizal_viiib', password: 'pass123', nama: 'FAIZAL', kelas: 'VIIIb', gender: 'L'},
                {username: 'firman_viiib', password: 'pass123', nama: 'FIRMAN SYAH', kelas: 'VIIIb', gender: 'L'},
                {username: 'habil_viiib', password: 'pass123', nama: 'HABIL ALMUHASIM', kelas: 'VIIIb', gender: 'L'},
                {username: 'raeyhan_viiib', password: 'pass123', nama: 'MUHAMMAD RAEYHAN PRATAMA', kelas: 'VIIIb', gender: 'L'},
                {username: 'rafiq_viiib', password: 'pass123', nama: 'MUHAMMAD RAFIQ', kelas: 'VIIIb', gender: 'L'},
                {username: 'nada_viiib', password: 'pass123', nama: 'NADA SAKINA', kelas: 'VIIIb', gender: 'P'},
                {username: 'putriana_viiib', password: 'pass123', nama: 'PUTRI NUR ARINA', kelas: 'VIIIb', gender: 'P'},
                {username: 'reza_viiib', password: 'pass123', nama: 'REZA RAHARDIAN PUTRA', kelas: 'VIIIb', gender: 'L'},
                {username: 'tasya_viiib', password: 'pass123', nama: 'TASYA RAMADANI', kelas: 'VIIIb', gender: 'P'},
                {username: 'zulfadli_viiib', password: 'pass123', nama: 'ZULFADLI HAIKAL', kelas: 'VIIIb', gender: 'L'}
            ],
            teacher: {
                username: 'guru1',
                password: 'password123',
                nama: 'Muhammad Nopran, S.Pd.',
                role: 'Guru TIK'
            },
            materi: [
                {
                    id: 1,
                    judul: 'Pengenalan Komputer',
                    deskripsi: 'Memahami dasar-dasar komputer dan komponen utamanya',
                    gambar: 'https://images.unsplash.com/photo-1587831990711-23ca6441447b?w=800&h=400&fit=crop',
                    video: 'https://www.youtube.com/embed/0hC3IGYz0RY?list=PLNaIXepebYwae2n4penNIVUzZQWQ7mRDj',
                    konten: `
<div class="space-y-6">
  <header class="rounded-2xl border p-5 bg-gradient-to-r from-purple-50 to-sky-50">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl grid place-items-center text-white" style="background:linear-gradient(135deg,#7C3AED,#38BDF8);">ğŸ–¥ï¸</div>
      <div>
        <h3 class="text-2xl font-extrabold text-slate-900">Pengenalan Komputer</h3>
        <p class="text-slate-600">IPSO & Fondasi Literasi Digital</p>
      </div>
      <span class="ml-auto px-3 py-1 rounded-full border text-sm font-semibold">Level: Pemula</span>
    </div>
  </header>
  <section class="p-5 rounded-xl border bg-white text-sm leading-6 text-slate-700 space-y-4">
    <p>Komputer bukan sekadar mesin untuk mengetik atau menonton video, tetapi merupakan sebuah sistem yang mampu menerima data, memproses, menyimpan, lalu menghasilkan informasi menjadi bentuk yang bermanfaat...</p>
    <p>Di era digital sekarang, kemampuan memahami cara kerja komputer tidak lagi menjadi skill tambahan, tetapi sudah menjadi kebutuhan dasar...</p>
    <p>Untuk memahami konsep komputer dengan mudah, bayangkan komputer seperti dapur...</p>
    <p><span class="font-semibold text-indigo-700">Input â†’ Process â†’ Storage â†’ Output (IPSO)</span> adalah pola kerja dasar komputer.</p>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-2">Contoh nyata siswa MTs</h4>
      <ul class="list-disc list-inside">
        <li>Ketik tugas Word â†’ keyboard (input) â†’ CPU (process) â†’ monitor (output) â†’ simpan SSD (storage)</li>
        <li>Cari video belajar â†’ klik pencarian â†’ proses request â†’ video tampil â†’ cache sementara</li>
        <li>Kirim file tugas â†’ server cloud simpan â†’ guru download</li>
      </ul>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-2">Skill progres wajib</h4>
      <ul class="list-disc list-inside">
        <li>Memahami IPSO</li>
        <li>Bedakan input device vs output</li>
        <li>Paham CPU, RAM, Storage sederhana</li>
      </ul>
    </div>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">Studi Kasus Madrasah</h4>
    <p class="text-sm text-slate-700">MTs mengadakan lomba poster digital hari santri...</p>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">Mini Tabel Latihan</h4>
    <div class="overflow-x-auto">
      <table class="w-full text-sm border rounded-xl">
        <thead><tr class="bg-slate-50"><th class="p-2 border">Aktivitas</th><th class="p-2 border">Input</th><th class="p-2 border">Process</th><th class="p-2 border">Storage</th><th class="p-2 border">Output</th></tr></thead>
        <tbody><tr><td class="p-2 border">Word</td><td class="p-2 border">Keyboard</td><td class="p-2 border">CPU</td><td class="p-2 border">SSD</td><td class="p-2 border">Monitor</td></tr></tbody>
      </table>
    </div>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">Mini Project Bab 1</h4>
    <p class="text-sm text-slate-700">Buat diagram IPSO kamu sendiri dalam bentuk poster Canva...</p>
  </section>
  <section class="p-5 rounded-2xl border bg-gradient-to-r from-purple-50 to-blue-50">
    <h4 class="font-extrabold mb-2">Rangkuman Bab 1</h4>
    <ul class="text-sm space-y-1"><li>Semua komputer mengikuti pola IPSO.</li></ul>
  </section>
</div>
`
                },
                {
                    id: 2,
                    judul: 'Perangkat Keras (Hardware)',
                    deskripsi: 'Mengenal berbagai perangkat keras komputer',
                    gambar: 'https://images.unsplash.com/photo-1591799264318-7e6ef8ddb7ea?w=800&h=400&fit=crop',
                    video: 'https://www.youtube.com/embed/Y-BU-1J_2Vo',
                    konten: `
<div class="space-y-6">
  <header class="rounded-2xl border p-5 bg-gradient-to-r from-purple-50 to-sky-50">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl grid place-items-center text-white" style="background:linear-gradient(135deg,#7C3AED,#38BDF8);">ğŸ§°</div>
      <div>
        <h3 class="text-2xl font-extrabold text-slate-900">Perangkat Keras (Hardware)</h3>
        <p class="text-slate-600">Komponen fisik komputer â€” CPU, RAM, Storage, GPU, Motherboard, I/O</p>
      </div>
    </div>
  </header>

  <section class="p-5 rounded-xl border bg-white text-sm leading-6 text-slate-700 space-y-4">
    <p>Perangkat keras atau hardware adalah semua komponen fisik yang dapat disentuh secara langsung pada komputer. Tanpa hardware, komputer tidak dapat menjalankan tugasnya walaupun memiliki software terbaik. Memahami hardware membuat siswa mampu mengoptimalkan pemakaian perangkat di sekolah maupun di rumah.</p>
    <div class="p-4 rounded-lg border bg-gradient-to-r from-sky-50 to-purple-50"><span class="font-semibold">Catatan:</span> Upgrade yang tepat bisa meningkatkan pengalaman belajar secara signifikan.</div>
  </section>

  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ§  CPU (Central Processing Unit)</h4>
      <p>CPU adalah otak komputer yang memproses instruksi. Semakin cepat CPU, semakin cepat respons. Di lab TIK, Word yang lambat sering dipengaruhi CPU lemah atau terlalu banyak aplikasi aktif.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ“ RAM (Random Access Memory)</h4>
      <p>RAM adalah memori sementara. RAM berpengaruh besar pada multitasking. Membuka YouTube, Word, dan Browser sekaligus pada RAM 4GB akan lebih lambat dibanding 8GB.</p>
    </div>
  </section>

  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ’¿ Storage (SSD/HDD)</h4>
      <p>HDD lebih murah namun lambat; SSD sangat cepat. Upgrade HDD â†’ SSD membuat boot Windows dan loading aplikasi jauh lebih singkat â€” efeknya terasa di kelas.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ¨ GPU (Kartu Grafis)</h4>
      <p>GPU mengolah grafik. Penting untuk desain poster digital lomba hari santri dan konten dakwah visual. Bukan hanya untuk gaming.</p>
    </div>
  </section>

  <section class="grid md:grid-cols-3 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ§² Motherboard</h4>
      <p>Papan sirkuit utama tempat semua komponen terhubung. Seperti pusat yang membuat sistem bekerja harmonis.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ”Œ Perangkat Input</h4>
      <p>Keyboard, mouse, kamera, mic, stylus. Di madrasah, input bisa berupa rekaman hafalan melalui webcam.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ“º Perangkat Output</h4>
      <p>Monitor, speaker, printer, projector. Saat guru presentasi melalui proyektor, itu output komputer ke siswa.</p>
    </div>
  </section>

  <section class="p-5 rounded-xl border bg-white text-sm space-y-2">
    <h4 class="font-bold mb-1">âš ï¸ Kebersihan & Keamanan</h4>
    <p>Debu di kipas CPU menyebabkan panas berlebih. Biasakan merawat perangkat sebagai adab belajar: gunakan dengan hati-hati, jaga kebersihan, dan ikuti prosedur.</p>
  </section>

  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ“š Studi Kasus Madrasah</h4>
    <p class="text-sm text-slate-700">MTs mengadakan lomba desain poster â€œHari Santri Nasionalâ€. Komputer dengan SSD dan GPU baik mengolah desain lebih cepat, sedangkan perangkat HDD lama dan RAM kecil membuat aplikasi editing lambat sehingga mengganggu fokus.</p>
  </section>

  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ§ª Mini Tabel Hardware</h4>
    <div class="overflow-x-auto">
      <table class="w-full text-sm border rounded-xl">
        <thead>
          <tr class="bg-slate-50">
            <th class="p-2 border">Komponen</th>
            <th class="p-2 border">Fungsi</th>
            <th class="p-2 border">Dampak</th>
          </tr>
        </thead>
        <tbody>
          <tr><td class="p-2 border">CPU</td><td class="p-2 border">Memproses instruksi</td><td class="p-2 border">Responsif</td></tr>
          <tr><td class="p-2 border">RAM</td><td class="p-2 border">Memori sementara</td><td class="p-2 border">Multitasking lancar</td></tr>
          <tr><td class="p-2 border">SSD</td><td class="p-2 border">Penyimpanan cepat</td><td class="p-2 border">Boot & loading cepat</td></tr>
          <tr><td class="p-2 border">GPU</td><td class="p-2 border">Olah grafik</td><td class="p-2 border">Desain/video mulus</td></tr>
          <tr><td class="p-2 border">Motherboard</td><td class="p-2 border">Penghubung komponen</td><td class="p-2 border">Stabil & harmonis</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">ğŸ› ï¸ Mini Project Bab 2</h4>
      <ol class="list-decimal list-inside text-sm space-y-1 text-slate-700">
        <li>Buka System Information / Task Manager dan catat CPU, RAM, Storage, GPU.</li>
        <li>Tentukan apakah storage SSD atau HDD.</li>
        <li>Pilih 1 komponen paling strategis untuk upgrade lab dan jelaskan alasannya.</li>
      </ol>
    </div>
    <div class="p-5 rounded-2xl border bg-gradient-to-r from-purple-50 to-blue-50">
      <h4 class="font-extrabold mb-2">ğŸ§¾ Rangkuman Bab 2</h4>
      <ul class="text-sm space-y-1">
        <li>Hardware = komponen fisik komputer.</li>
        <li>Inti: CPU, RAM, Storage, GPU, Motherboard, I/O.</li>
        <li>Upgrade paling terasa: SSD & RAM.</li>
        <li>Perawatan = pembelajaran nyaman & beradab.</li>
      </ul>
    </div>
  </section>
</div>
`
                },
                {
                    id: 3,
                    judul: 'Perangkat Lunak (Software)',
                    deskripsi: 'Memahami jenis-jenis perangkat lunak komputer',
                    gambar: 'https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=800&h=400&fit=crop',
                    video: 'https://www.youtube.com/embed/j3VO0ANqDls',
                    konten: `
<div class="space-y-6">
  <header class="rounded-2xl border p-5 bg-gradient-to-r from-purple-50 to-sky-50">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl grid place-items-center text-white" style="background:linear-gradient(135deg,#7C3AED,#38BDF8);">ğŸ§©</div>
      <div>
        <h3 class="text-2xl font-extrabold text-slate-900">Perangkat Lunak (Software)</h3>
        <p class="text-slate-600">OS, aplikasi belajar, kreatif, keamanan, utilitas â€” praktik aman & produktif</p>
      </div>
    </div>
  </header>

  <section class="p-5 rounded-xl border bg-white text-sm leading-6 text-slate-700 space-y-4">
    <p>Software adalah kumpulan program yang memberi â€œjiwaâ€ pada komputer: mengatur, memerintah, dan menjalankan fungsi tertentu agar hardware bermanfaat. Dengan software, siswa bisa mengakses materi digital, mengerjakan tugas, dan berkolaborasi daring.</p>
    <div class="p-4 rounded-lg border bg-gradient-to-r from-sky-50 to-purple-50"><span class="font-semibold">Catatan:</span> Gunakan software legal dari sumber resmi untuk menghindari malware dan menjaga keberkahan belajar.</div>
  </section>

  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ–¥ï¸ Sistem Operasi (OS)</h4>
      <p>OS mengatur seluruh perangkat, file, dan aplikasi. Contoh: Windows, macOS, Linux, Android, iOS. Di sekolah, Windows umum dipakai karena familiar dan kompatibel.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ”§ Aplikasi Sekolah</h4>
      <p>Word untuk mengetik tugas, PowerPoint untuk presentasi, Excel untuk laporan, Browser untuk cari referensi, PDF Reader untuk modul. Tanpa ini, pembelajaran digital sulit berjalan.</p>
    </div>
  </section>

  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ¨ Aplikasi Kreatif</h4>
      <p>Canva untuk desain poster, CapCut untuk video dakwah, Photopea untuk edit gambar, perekam suara untuk nasyid. Kunci untuk konten positif generasi Z.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ¯ Pembelajaran Interaktif</h4>
      <p>Quizizz, Wordwall, Kahoot, Liveworksheet, YouTube Edu membuat belajar fun, kompetitif, dan kolaboratifâ€”namun tetap bermakna.</p>
    </div>
  </section>

  <section class="grid md:grid-cols-3 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ” Keamanan Digital</h4>
      <p>Antivirus, firewall, password manager, 2FA. Menjaga data sekolah adalah adab dan tanggung jawab siswa.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ“¦ Instal â€¢ Update â€¢ Uninstall</h4>
      <p>Update rutin memberi fitur & keamanan. Hindari crack/ilegalâ€”berisiko malware dan melanggar hukum.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">âš™ï¸ Utilitas</h4>
      <p>Task Manager, Disk Cleanup, Device Manager membantu membaca kondisi kinerja (CPU/RAM/storage) dan merawat perangkat.</p>
    </div>
  </section>

  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ“š Studi Kasus Madrasah</h4>
    <p class="text-sm text-slate-700">Kegiatan â€œPoster Dakwah Hari Santriâ€: siswa memakai Canva dan CapCut. Hardware sama, tetapi yang mahir software lebih cepat dan hasilnya berkualitasâ€”membuktikan penguasaan software meningkatkan kreativitas & produktivitas.</p>
  </section>

  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ§ª Mini Tabel Software</h4>
    <div class="overflow-x-auto">
      <table class="w-full text-sm border rounded-xl">
        <thead>
          <tr class="bg-slate-50">
            <th class="p-2 border">Kategori</th>
            <th class="p-2 border">Contoh</th>
            <th class="p-2 border">Kegunaan</th>
          </tr>
        </thead>
        <tbody>
          <tr><td class="p-2 border">OS</td><td class="p-2 border">Windows, Linux, Android</td><td class="p-2 border">Mengatur sistem</td></tr>
          <tr><td class="p-2 border">Belajar</td><td class="p-2 border">Word, PPT, Excel, Browser</td><td class="p-2 border">Tugas & referensi</td></tr>
          <tr><td class="p-2 border">Kreatif</td><td class="p-2 border">Canva, CapCut, Photopea</td><td class="p-2 border">Desain dakwah</td></tr>
          <tr><td class="p-2 border">Keamanan</td><td class="p-2 border">Antivirus, 2FA, Firewall</td><td class="p-2 border">Lindungi data</td></tr>
          <tr><td class="p-2 border">Utilitas</td><td class="p-2 border">Task Manager, Cleanup</td><td class="p-2 border">Optimasi</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">ğŸ› ï¸ Mini Project Bab 3</h4>
      <ol class="list-decimal list-inside text-sm space-y-1 text-slate-700">
        <li>Instal 1 aplikasi produktif (laptop/HP) dari sumber resmi.</li>
        <li>Tulis review 3 paragraf: fungsi, manfaat belajar, cocok untuk tugas apa.</li>
        <li>Kumpulkan melalui Google Form kelas.</li>
      </ol>
    </div>
    <div class="p-5 rounded-2xl border bg-gradient-to-r from-purple-50 to-blue-50">
      <h4 class="font-extrabold mb-2">ğŸ§¾ Rangkuman Bab 3</h4>
      <ul class="text-sm space-y-1">
        <li>Software membuat komputer berguna.</li>
        <li>OS inti; aplikasi belajar & kreatif memperkaya proses.</li>
        <li>Keamanan & utilitas = kebiasaan baik pelajar muslim.</li>
      </ul>
    </div>
  </section>
</div>
`
                },
                {
                    id: 4,
                    judul: 'Navigasi Sistem Operasi Windows',
                    deskripsi: 'Belajar menggunakan Windows dengan efektif',
                    gambar: 'https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=800&h=400&fit=crop',
                    video: 'https://www.youtube.com/embed/HFRzjP8KjUk',
                    konten: `<div class="space-y-6">
  <header class="rounded-2xl border p-5 bg-gradient-to-r from-purple-50 to-sky-50">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl grid place-items-center text-white" style="background:linear-gradient(135deg,#7C3AED,#38BDF8);">ğŸªŸ</div>
      <div>
        <h3 class="text-2xl font-extrabold text-slate-900">Navigasi Dasar Windows</h3>
        <p class="text-slate-600">Desktop â€¢ Taskbar â€¢ Start â€¢ File Explorer â€¢ Shortcut & Efisiensi</p>
      </div>
    </div>
  </header>
  <section class="p-5 rounded-xl border bg-white text-sm leading-6 text-slate-700 space-y-4">
    <p>Navigasi Windows adalah kemampuan dasar yang akan mempersingkat waktu kerja dan membuat kamu lebih rapi. Dengan memahami desktop, taskbar, menu Start, dan File Explorer, tugas-tugas sekolah akan selesai lebih cepat dan minim kesalahan. Bab ini membantu siswa MTs membangun kebiasaan kerja komputer yang efektif.</p>
    <div class="p-4 rounded-lg border bg-gradient-to-r from-sky-50 to-purple-50"><span class="font-semibold">Tujuan:</span> menguasai shortcut penting, manajemen jendela, dan mencari file dengan cepat.</div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ–¥ï¸ Desktop & Taskbar</h4>
      <p>Desktop adalah area kerja utama. Taskbar menampilkan aplikasi yang sedang berjalan. Pin aplikasi favorit di taskbar agar bisa dibuka sekali klik.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ” Start & Search</h4>
      <p>Tekan tombol Windows untuk membuka Start, lalu ketik nama aplikasi/file untuk menelusuri cepat. Ini jauh lebih efisien daripada mencari manual.</p>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ—‚ï¸ File Explorer</h4>
      <p>Gunakan Win+E. Pahami struktur folder (Documents, Downloads, Pictures). Hindari menumpuk file di Desktop.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">âš¡ Shortcut Penting</h4>
      <p>Win+E (Explorer), Win+D (Desktop), Alt+Tab (pindah aplikasi), Win+L (lock), Ctrl+C/V/Z (copy/paste/undo).</p>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸªŸ Manajemen Jendela</h4>
      <p>Gunakan Snap/split screen: drag jendela ke kiri/kanan atau Win+panah. Cocok untuk membaca materi sambil mengetik ringkasan.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ§° Task Manager</h4>
      <p>Tekan Ctrl+Shift+Esc untuk melihat aplikasi yang memberatkan. End task jika macet, tapi selalu simpan pekerjaan sebelumnya.</p>
    </div>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ“š Studi Kasus Madrasah</h4>
    <p class="text-sm text-slate-700">Saat pelajaran TIK, guru meminta siswa membuka modul PDF dan sekaligus menulis rangkuman di Word. Siswa yang menguasai split screen dapat bekerja dua jendela sekaligus dengan rapi sehingga lebih cepat selesai.</p>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ§ª Mini Tabel Shortcut</h4>
    <div class="overflow-x-auto">
      <table class="w-full text-sm border rounded-xl">
        <thead>
          <tr class="bg-slate-50"><th class="p-2 border">Shortcut</th><th class="p-2 border">Fungsi</th></tr>
        </thead>
        <tbody>
          <tr><td class="p-2 border">Win+E</td><td class="p-2 border">Buka File Explorer</td></tr>
          <tr><td class="p-2 border">Alt+Tab</td><td class="p-2 border">Pindah aplikasi</td></tr>
          <tr><td class="p-2 border">Win+L</td><td class="p-2 border">Kunci layar</td></tr>
          <tr><td class="p-2 border">Ctrl+C/V/Z</td><td class="p-2 border">Copy/Paste/Undo</td></tr>
        </tbody>
      </table>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">ğŸ› ï¸ Mini Project Bab 4</h4>
      <ol class="list-decimal list-inside text-sm space-y-1 text-slate-700">
        <li>Atur split screen: Word di kiri, PDF di kanan.</li>
        <li>Pin 3 aplikasi favorit ke taskbar.</li>
        <li>Buat folder â€œTIK_KelasVIII\\Bab4_Praktikâ€ dan simpan 1 file ringkasan.</li>
      </ol>
    </div>
    <div class="p-5 rounded-2xl border bg-gradient-to-r from-purple-50 to-blue-50">
      <h4 class="font-extrabold mb-2">ğŸ§¾ Rangkuman Bab 4</h4>
      <ul class="text-sm space-y-1">
        <li>Navigasi efektif = kerja lebih cepat.</li>
        <li>Search & shortcut menghemat waktu.</li>
        <li>Split screen meningkatkan fokus belajar.</li>
      </ul>
    </div>
  </section>
</div>`
                },
                {
                    id: 5,
                    judul: 'Manajemen File dan Folder',
                    deskripsi: 'Mengelola file dan folder dengan terorganisir',
                    gambar: 'https://images.unsplash.com/photo-1544396821-4dd40b938ad3?w=800&h=400&fit=crop',
                    video: 'https://www.youtube.com/embed/eusIWTJqEEo',
                    konten: `<div class="space-y-6">
  <header class="rounded-2xl border p-5 bg-gradient-to-r from-purple-50 to-sky-50">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl grid place-items-center text-white" style="background:linear-gradient(135deg,#7C3AED,#38BDF8);">ğŸ—‚ï¸</div>
      <div>
        <h3 class="text-2xl font-extrabold text-slate-900">Manajemen File & Folder</h3>
        <p class="text-slate-600">Struktur rapi â€¢ Penamaan konsisten â€¢ Backup & sinkronisasi</p>
      </div>
    </div>
  </header>
  <section class="p-5 rounded-xl border bg-white text-sm leading-6 text-slate-700 space-y-4">
    <p>Manajemen file adalah kebiasaan inti agar belajar efektif. Tanpa struktur yang rapi, siswa akan kesulitan mencari dokumen tugas, gambar, dan materi. Dengan struktur, penamaan, dan backup yang konsisten, pekerjaan menjadi lebih cepat dan aman.</p>
    <div class="p-4 rounded-lg border bg-gradient-to-r from-sky-50 to-purple-50"><span class="font-semibold">Prinsip:</span> buat folder per topik/semester, nama file jelas, lakukan backup rutin.</div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ“ Struktur Folder</h4>
      <p>Buat folder utama TIK_KelasVIII, lalu subfolder 01 s/d 08 untuk setiap bab. Tambahkan subfolder â€œLatihanâ€, â€œTugasâ€, dan â€œProyekâ€.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ·ï¸ Penamaan File</h4>
      <p>Gunakan pola <span class="font-semibold">YYYYMMDD_Judul_Nama</span>. Contoh: 20251101_RangkumanBab4_Dika.pdf</p>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">â˜ï¸ Backup & Cloud</h4>
      <p>Aktifkan sinkronisasi ke Google Drive/OneDrive. Simpan berkas penting di cloud agar aman jika komputer bermasalah.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ§¹ Kebersihan Folder</h4>
      <p>Jangan menumpuk dokumen di Desktop. Rapikan Downloads setiap pekan dan hapus berkas duplikat.</p>
    </div>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ“š Studi Kasus Madrasah</h4>
    <p class="text-sm text-slate-700">Ketika UTS, guru meminta portofolio digital. Siswa yang memiliki struktur dan penamaan rapi bisa menyiapkan portofolio dalam hitungan menit dibanding yang filenya berantakan.</p>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ§ª Mini Tabel Organisasi</h4>
    <div class="overflow-x-auto">
      <table class="w-full text-sm border rounded-xl">
        <thead>
          <tr class="bg-slate-50"><th class="p-2 border">Aspek</th><th class="p-2 border">Contoh Praktik</th></tr>
        </thead>
        <tbody>
          <tr><td class="p-2 border">Struktur</td><td class="p-2 border">TIK_KelasVIII/01_Pengenalan/Latihan</td></tr>
          <tr><td class="p-2 border">Nama file</td><td class="p-2 border">20251101_TugasBab5_Syamira.docx</td></tr>
          <tr><td class="p-2 border">Backup</td><td class="p-2 border">Sinkronisasi Google Drive mingguan</td></tr>
        </tbody>
      </table>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">ğŸ› ï¸ Mini Project Bab 5</h4>
      <ol class="list-decimal list-inside text-sm space-y-1 text-slate-700">
        <li>Buat struktur folder lengkap 01â€“08.</li>
        <li>Konversi 2 dokumen Word ke PDF dan simpan dengan pola nama.</li>
        <li>Aktifkan sinkronisasi & cek status sinkron.</li>
      </ol>
    </div>
    <div class="p-5 rounded-2xl border bg-gradient-to-r from-purple-50 to-blue-50">
      <h4 class="font-extrabold mb-2">ğŸ§¾ Rangkuman Bab 5</h4>
      <ul class="text-sm space-y-1">
        <li>Struktur rapi memudahkan pencarian.</li>
        <li>Penamaan konsisten = profesional.</li>
        <li>Backup melindungi dari kehilangan data.</li>
      </ul>
    </div>
  </section>
</div>`
                },
                {
                    id: 6,
                    judul: 'Mengetik 10 Jari',
                    deskripsi: 'Teknik mengetik cepat dan efisien',
                    gambar: 'https://images.unsplash.com/photo-1587829741301-dc798b83add3?w=800&h=400&fit=crop',
                    video: 'https://www.youtube.com/embed/3D6_hXqX5I4',
                    konten: `<div class="space-y-6">
  <header class="rounded-2xl border p-5 bg-gradient-to-r from-purple-50 to-sky-50">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl grid place-items-center text-white" style="background:linear-gradient(135deg,#7C3AED,#38BDF8);">âŒ¨ï¸</div>
      <div>
        <h3 class="text-2xl font-extrabold text-slate-900">Mengetik Sepuluh Jari</h3>
        <p class="text-slate-600">Home row â€¢ Akurasi â†’ Kecepatan â€¢ Rutinitas singkat harian</p>
      </div>
    </div>
  </header>
  <section class="p-5 rounded-xl border bg-white text-sm leading-6 text-slate-700 space-y-4">
    <p>Mengetik sepuluh jari adalah keterampilan dasar yang mempercepat semua tugas digital. Fokus awal pada <span class="font-semibold">akurasi</span>, baru kecepatan. Biasakan pandangan ke layar, bukan ke keyboard.</p>
    <div class="p-4 rounded-lg border bg-gradient-to-r from-sky-50 to-purple-50"><span class="font-semibold">Home row:</span> ASDF (kiri) dan JKL; (kanan). Jempol untuk spasi.</div>
  </section>
  <section class="grid md:grid-cols-3 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ‘† Postur & Posisi</h4>
      <p>Punggung tegak, pergelangan netral, jarak layar nyaman. Ini mencegah pegal dan meningkatkan akurasi.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ¯ Fokus Akurasi</h4>
      <p>Latih suku kata pendek sebelum kalimat panjang. Jangan mengejar WPM jika salah ketik masih tinggi.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">â±ï¸ Target Kecepatan</h4>
      <p>Mulai dari 20â€“25 WPM; tingkatkan 5 WPM tiap minggu sampai stabil 40â€“50 WPM.</p>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">ğŸ› ï¸ Langkah Praktik 10 Menit</h4>
      <ol class="list-decimal list-inside text-sm space-y-1 text-slate-700">
        <li>1 menit: Home row (asdf jkl;)</li>
        <li>3 menit: Kombinasi baris (qwert asdf zxcv)</li>
        <li>3 menit: Kata umum bahasa Indonesia</li>
        <li>3 menit: Kalimat pendek & tanda baca</li>
      </ol>
    </div>
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">âœ… Do & Donâ€™t</h4>
      <ul class="list-disc list-inside text-sm space-y-1">
        <li>Do: istirahat singkat tiap 20â€“30 menit.</li>
        <li>Do: perhatikan akurasi > 92% sebelum naik kecepatan.</li>
        <li>Donâ€™t: menekan tombol terlalu kuat / menunduk lama.</li>
      </ul>
    </div>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ“Š Tabel Rutinitas</h4>
    <div class="overflow-x-auto">
      <table class="w-full text-sm border rounded-xl">
        <thead><tr class="bg-slate-50"><th class="p-2 border">Hari</th><th class="p-2 border">Durasi</th><th class="p-2 border">Fokus</th></tr></thead>
        <tbody>
          <tr><td class="p-2 border">Senin</td><td class="p-2 border">10 menit</td><td class="p-2 border">Home row</td></tr>
          <tr><td class="p-2 border">Rabu</td><td class="p-2 border">10 menit</td><td class="p-2 border">Kombinasi baris</td></tr>
          <tr><td class="p-2 border">Jumat</td><td class="p-2 border">10 menit</td><td class="p-2 border">Kalimat pendek</td></tr>
        </tbody>
      </table>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">ğŸ’ Mini Project Bab 6</h4>
      <ol class="list-decimal list-inside text-sm space-y-1 text-slate-700">
        <li>Catat WPM & akurasi minggu ini.</li>
        <li>Tetapkan target minggu depan (+5 WPM).</li>
        <li>Tulis 5 kalimat refleksi kesulitan & solusi.</li>
      </ol>
    </div>
    <div class="p-5 rounded-2xl border bg-gradient-to-r from-purple-50 to-blue-50">
      <h4 class="font-extrabold mb-2">ğŸ§¾ Rangkuman Bab 6</h4>
      <ul class="text-sm space-y-1">
        <li>Akurasi dulu, speed kemudian.</li>
        <li>Rutinitas singkat lebih efektif dari latihan jarang tapi lama.</li>
        <li>Postur & jeda istirahat menjaga kesehatan belajar.</li>
      </ul>
    </div>
  </section>
</div>`
                },
                {
                    id: 7,
                    judul: 'Pengenalan Microsoft Word',
                    deskripsi: 'Membuat dan mengedit dokumen dengan Word',
                    gambar: 'https://images.unsplash.com/photo-1618761714954-0b8cd0026356?w=800&h=400&fit=crop',
                    video: 'https://www.youtube.com/embed/Ua2ws-LcLxE',
                    konten: `<div class="space-y-6">
  <header class="rounded-2xl border p-5 bg-gradient-to-r from-purple-50 to-sky-50">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl grid place-items-center text-white" style="background:linear-gradient(135deg,#7C3AED,#38BDF8);">ğŸ“</div>
      <div>
        <h3 class="text-2xl font-extrabold text-slate-900">Microsoft Word Dasar</h3>
        <p class="text-slate-600">Styles â€¢ Paragraph â€¢ Insert â€¢ Dokumen rapi & profesional</p>
      </div>
    </div>
  </header>
  <section class="p-5 rounded-xl border bg-white text-sm leading-6 text-slate-700 space-y-4">
    <p>Word adalah aplikasi utama untuk tugas sekolah. Tujuan bab ini: membuat dokumen satu halaman yang rapi dan profesional dengan memanfaatkan fitur intiâ€”bukan format manual seadanya.</p>
    <div class="p-4 rounded-lg border bg-gradient-to-r from-sky-50 to-purple-50"><span class="font-semibold">Kunci:</span> gunakan Styles untuk judul/subjudul, atur paragraph spacing & alignment, dan tambahkan elemen insert sewajarnya.</div>
  </section>
  <section class="grid md:grid-cols-3 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ”¤ Styles</h4>
      <p>Heading 1/2/3 untuk judul & subjudul. Styles memudahkan daftar isi otomatis.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ“‘ Paragraph</h4>
      <p>Alignment (kiri/rata), line spacing 1.15â€“1.5, bullets/numbering seperlunya.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ§© Insert</h4>
      <p>Gambar, tabel, header/footer, nomor halaman. Jaga keseimbangan teks vs visual.</p>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">ğŸ› ï¸ Langkah Praktik: Surat 1 Halaman</h4>
      <ol class="list-decimal list-inside text-sm space-y-1 text-slate-700">
        <li>Pakai template kosong dan atur margin.</li>
        <li>Terapkan Styles untuk judul & subjudul.</li>
        <li>Tambahkan tabel 2Ã—3 dan nomor halaman.</li>
        <li>Export ke PDF dan beri nama file yang rapi.</li>
      </ol>
    </div>
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">âœ… Do & Donâ€™t</h4>
      <ul class="list-disc list-inside text-sm space-y-1">
        <li>Do: gunakan Styles, bukan format manual.</li>
        <li>Do: konsisten font & spacing.</li>
        <li>Donâ€™t: menumpuk terlalu banyak font/warna.</li>
      </ul>
    </div>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ“š Studi Kasus Madrasah</h4>
    <p class="text-sm text-slate-700">Laporan kegiatan Muhadarah disusun rapi menggunakan Styles, sehingga saat dikompilasi menjadi portofolio madrasah, daftar isi otomatis bisa dibuat dengan sekali klik.</p>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ§ª Mini Tabel Format</h4>
    <div class="overflow-x-auto">
      <table class="w-full text-sm border rounded-xl">
        <thead><tr class="bg-slate-50"><th class="p-2 border">Fitur</th><th class="p-2 border">Manfaat</th></tr></thead>
        <tbody>
          <tr><td class="p-2 border">Styles</td><td class="p-2 border">Konsistensi & daftar isi</td></tr>
          <tr><td class="p-2 border">Paragraph</td><td class="p-2 border">Teks enak dibaca</td></tr>
          <tr><td class="p-2 border">Insert</td><td class="p-2 border">Dokumen informatif</td></tr>
        </tbody>
      </table>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">ğŸ’ Mini Project Bab 7</h4>
      <ol class="list-decimal list-inside text-sm space-y-1 text-slate-700">
        <li>Buat surat 1 halaman bertema â€œAdab Digital Pelajar Muslimâ€.</li>
        <li>Gunakan Styles, sisipkan tabel kecil, dan nomor halaman.</li>
        <li>Export PDF & simpan dengan pola nama file rapi.</li>
      </ol>
    </div>
    <div class="p-5 rounded-2xl border bg-gradient-to-r from-purple-50 to-blue-50">
      <h4 class="font-extrabold mb-2">ğŸ§¾ Rangkuman Bab 7</h4>
      <ul class="text-sm space-y-1">
        <li>Word dasar + disiplin format = dokumen profesional.</li>
        <li>Styles mempercepat pembuatan daftar isi.</li>
        <li>Export PDF untuk tampilan konsisten.</li>
      </ul>
    </div>
  </section>
</div>`
                },
                {
                    id: 8,
                    judul: 'Internet & Literasi Digital',
                    deskripsi: 'Menggunakan internet dengan aman dan bijak',
                    gambar: 'https://images.unsplash.com/photo-1484807352052-23338990c6c6?w=800&h=400&fit=crop',
                    video: 'https://www.youtube.com/embed/qNskX8A5I90',
                    konten: `<div class="space-y-6">
  <header class="rounded-2xl border p-5 bg-gradient-to-r from-purple-50 to-sky-50">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl grid place-items-center text-white" style="background:linear-gradient(135deg,#7C3AED,#38BDF8);">ğŸŒ</div>
      <div>
        <h3 class="text-2xl font-extrabold text-slate-900">Internet & Literasi Digital</h3>
        <p class="text-slate-600">Keamanan â€¢ Etika â€¢ Produktivitas â€” praktik higienis digital</p>
      </div>
    </div>
  </header>
  <section class="p-5 rounded-xl border bg-white text-sm leading-6 text-slate-700 space-y-4">
    <p>Internet membuka akses ilmu tanpa batas. Namun siswa harus memiliki literasi digital: cara mencari informasi, menilai kredibilitas, menjaga keamanan, dan mengelola waktu layar dengan bijak.</p>
    <div class="p-4 rounded-lg border bg-gradient-to-r from-sky-50 to-purple-50"><span class="font-semibold">Ingat:</span> jaga adab digital: sopan, bertanggung jawab, dan bermanfaat.</div>
  </section>
  <section class="grid md:grid-cols-3 gap-4">
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ” Dasar Pencarian</h4>
      <p>Gunakan kata kunci spesifik, kutip â€œfrasa tepatâ€, dan cek tanggal artikel agar informasi tidak kedaluwarsa.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ›¡ï¸ Keamanan</h4>
      <p>Password kuat, 2FA, cek URL sebelum klik, dan jangan bagikan data pribadi sembarangan.</p>
    </div>
    <div class="p-5 rounded-xl border bg-white text-sm space-y-2">
      <h4 class="font-bold mb-1">ğŸ¤ Etika & Jejak Digital</h4>
      <p>Hormati hak cipta, hindari plagiarisme, jaga komentar yang sopan, dan ingat bahwa jejak digital sulit dihapus.</p>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">ğŸ› ï¸ Langkah Praktik: Digital Hygiene</h4>
      <ol class="list-decimal list-inside text-sm space-y-1 text-slate-700">
        <li>Buat 3 password kuat dan simpan dengan aman.</li>
        <li>Aktifkan 2FA pada satu layanan yang kamu pakai.</li>
        <li>Tulis 3 ciri artikel/website kredibel.</li>
      </ol>
    </div>
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">âœ… Do & Donâ€™t</h4>
      <ul class="list-disc list-inside text-sm space-y-1">
        <li>Do: verifikasi sumber & tanggal.</li>
        <li>Donâ€™t: pakai satu password untuk semua akun.</li>
      </ul>
    </div>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ“š Studi Kasus Madrasah</h4>
    <p class="text-sm text-slate-700">Siswa diminta mencari referensi sejarah perkembangan komputer. Kelas membandingkan 3 artikel berbeda dan menilai mana yang paling kredibel berdasarkan penulis, lembaga, tanggal, dan referensi.</p>
  </section>
  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">ğŸ§ª Mini Tabel Literasi</h4>
    <div class="overflow-x-auto">
      <table class="w-full text-sm border rounded-xl">
        <thead><tr class="bg-slate-50"><th class="p-2 border">Aspek</th><th class="p-2 border">Contoh Praktik</th></tr></thead>
        <tbody>
          <tr><td class="p-2 border">Keamanan</td><td class="p-2 border">2FA & password manager</td></tr>
          <tr><td class="p-2 border">Kredibilitas</td><td class="p-2 border">Cek penulis, lembaga, tanggal</td></tr>
          <tr><td class="p-2 border">Produktivitas</td><td class="p-2 border">Atur waktu layar & fokus</td></tr>
        </tbody>
      </table>
    </div>
  </section>
  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">ğŸ’ Mini Project Bab 8</h4>
      <ol class="list-decimal list-inside text-sm space-y-1 text-slate-700">
        <li>Buat panduan 1 halaman â€œEtika & Keamanan Internetâ€ untuk kelas.</li>
        <li>Sertakan 5 poin praktis & 1 ilustrasi.</li>
        <li>Export PDF dan beri nama file rapi.</li>
      </ol>
    </div>
    <div class="p-5 rounded-2xl border bg-gradient-to-r from-purple-50 to-blue-50">
      <h4 class="font-extrabold mb-2">ğŸ§¾ Rangkuman Bab 8</h4>
      <ul class="text-sm space-y-1">
        <li>Internet butuh literasi: cari, nilai, dan gunakan dengan bijak.</li>
        <li>Keamanan & etika digital = kebiasaan harian pelajar muslim.</li>
      </ul>
    </div>
  </section>
</div>`
                }
            ],
            quizBank: {
                pretest: [
                    {soal: 'Apa kepanjangan dari CPU?', pilihan: ['Central Processing Unit', 'Computer Personal Unit', 'Central Program Unit', 'Computer Processing Unit'], jawaban: 0},
                    {soal: 'Perangkat berikut yang termasuk input device adalah...', pilihan: ['Monitor', 'Printer', 'Keyboard', 'Speaker'], jawaban: 2},
                    {soal: 'RAM adalah singkatan dari...', pilihan: ['Random Access Memory', 'Read Access Memory', 'Rapid Access Memory', 'Real Access Memory'], jawaban: 0},
                    {soal: 'Sistem operasi yang dikembangkan oleh Microsoft adalah...', pilihan: ['Linux', 'MacOS', 'Windows', 'Unix'], jawaban: 2},
                    {soal: 'Perangkat penyimpanan permanen pada komputer adalah...', pilihan: ['RAM', 'ROM', 'Hard Disk', 'Cache'], jawaban: 2},
                    {soal: 'Browser yang dikembangkan oleh Google adalah...', pilihan: ['Firefox', 'Chrome', 'Safari', 'Opera'], jawaban: 1},
                    {soal: 'Shortcut untuk membuka File Explorer adalah...', pilihan: ['Win + D', 'Win + E', 'Win + R', 'Win + L'], jawaban: 1},
                    {soal: 'Ekstensi file dokumen Microsoft Word adalah...', pilihan: ['.txt', '.pdf', '.docx', '.xlsx'], jawaban: 2},
                    {soal: 'Fungsi utama dari motherboard adalah...', pilihan: ['Memproses data', 'Menghubungkan semua komponen', 'Menyimpan data', 'Menampilkan gambar'], jawaban: 1},
                    {soal: 'Output device yang digunakan untuk mencetak dokumen adalah...', pilihan: ['Scanner', 'Monitor', 'Printer', 'Keyboard'], jawaban: 2},
                    {soal: 'Shortcut untuk copy adalah...', pilihan: ['Ctrl + C', 'Ctrl + X', 'Ctrl + V', 'Ctrl + Z'], jawaban: 0},
                    {soal: 'Software antivirus termasuk dalam kategori...', pilihan: ['Sistem Operasi', 'Aplikasi', 'Utility', 'Hardware'], jawaban: 2},
                    {soal: 'Kapasitas penyimpanan 1 GB sama dengan...', pilihan: ['1000 KB', '1000 MB', '1024 MB', '1024 KB'], jawaban: 2},
                    {soal: 'Search engine populer yang paling banyak digunakan adalah...', pilihan: ['Bing', 'Yahoo', 'Google', 'DuckDuckGo'], jawaban: 2},
                    {soal: 'Tombol untuk menghapus karakter di sebelah kanan kursor adalah...', pilihan: ['Backspace', 'Delete', 'Enter', 'Tab'], jawaban: 1},
                    {soal: 'Format file gambar adalah...', pilihan: ['.mp3', '.jpg', '.docx', '.exe'], jawaban: 1},
                    {soal: 'Perangkat input yang digunakan untuk menunjuk dan mengklik adalah...', pilihan: ['Keyboard', 'Monitor', 'Mouse', 'Printer'], jawaban: 2},
                    {soal: 'Shortcut untuk paste adalah...', pilihan: ['Ctrl + C', 'Ctrl + X', 'Ctrl + V', 'Ctrl + A'], jawaban: 2},
                    {soal: 'Aplikasi Microsoft Office untuk membuat presentasi adalah...', pilihan: ['Word', 'Excel', 'PowerPoint', 'Access'], jawaban: 2},
                    {soal: 'WWW adalah singkatan dari...', pilihan: ['World Wide Web', 'World Web Wide', 'Wide World Web', 'Web World Wide'], jawaban: 0},
                    {soal: 'Perangkat yang berfungsi sebagai otak komputer adalah...', pilihan: ['RAM', 'Hard Disk', 'CPU', 'Monitor'], jawaban: 2},
                    {soal: 'Ekstensi file untuk video adalah...', pilihan: ['.jpg', '.mp3', '.mp4', '.txt'], jawaban: 2},
                    {soal: 'Shortcut untuk membuka jendela Run adalah...', pilihan: ['Win + R', 'Win + E', 'Win + D', 'Win + L'], jawaban: 0},
                    {soal: 'Software yang digunakan untuk membuat animasi dan desain grafis adalah...', pilihan: ['Microsoft Word', 'Adobe Photoshop', 'Notepad', 'Calculator'], jawaban: 1},
                    {soal: 'Fungsi utama dari Power Supply adalah...', pilihan: ['Memproses data', 'Menyimpan data', 'Menyuplai listrik', 'Menampilkan gambar'], jawaban: 2},
                    {soal: 'Email adalah singkatan dari...', pilihan: ['Electronic Mail', 'Electric Mail', 'Electronic Message', 'Electric Message'], jawaban: 0},
                    {soal: 'Shortcut untuk save file adalah...', pilihan: ['Ctrl + S', 'Ctrl + O', 'Ctrl + N', 'Ctrl + P'], jawaban: 0},
                    {soal: 'Perangkat yang menghubungkan komputer ke internet adalah...', pilihan: ['RAM', 'Modem', 'Hard Disk', 'Monitor'], jawaban: 1},
                    {soal: 'Tombol untuk mengunci komputer adalah...', pilihan: ['Win + L', 'Win + E', 'Win + R', 'Win + D'], jawaban: 0},
                    {soal: 'Software untuk mengompress file adalah...', pilihan: ['WinRAR', 'Microsoft Word', 'Paint', 'Calculator'], jawaban: 0},
                    {soal: 'Apa yang dimaksud dengan phishing?', pilihan: ['Virus komputer', 'Penipuan online', 'Software antivirus', 'Game online'], jawaban: 1},
                    {soal: 'Resolusi layar yang lebih tinggi menunjukkan...', pilihan: ['Layar lebih kecil', 'Gambar lebih tajam', 'Layar lebih gelap', 'Komputer lebih cepat'], jawaban: 1},
                    {soal: 'Shortcut untuk undo adalah...', pilihan: ['Ctrl + Z', 'Ctrl + Y', 'Ctrl + X', 'Ctrl + C'], jawaban: 0},
                    {soal: 'Cloud storage adalah...', pilihan: ['Penyimpanan lokal', 'Penyimpanan online', 'Penyimpanan eksternal', 'Penyimpanan internal'], jawaban: 1},
                    {soal: 'Format file audio adalah...', pilihan: ['.mp4', '.jpg', '.mp3', '.docx'], jawaban: 2},
                    {soal: 'Perangkat output yang menghasilkan suara adalah...', pilihan: ['Monitor', 'Speaker', 'Keyboard', 'Mouse'], jawaban: 1},
                    {soal: 'Shortcut untuk select all adalah...', pilihan: ['Ctrl + A', 'Ctrl + S', 'Ctrl + C', 'Ctrl + V'], jawaban: 0},
                    {soal: 'Bandwidth internet diukur dalam satuan...', pilihan: ['MB', 'Mbps', 'GB', 'GHz'], jawaban: 1},
                    {soal: 'Firewall berfungsi untuk...', pilihan: ['Mempercepat internet', 'Melindungi dari ancaman', 'Menyimpan data', 'Memproses data'], jawaban: 1},
                    {soal: 'Perangkat untuk membaca data dari CD/DVD adalah...', pilihan: ['Hard Disk', 'USB', 'Optical Drive', 'SSD'], jawaban: 2},
                    {soal: 'Shortcut untuk membuka Task Manager adalah...', pilihan: ['Ctrl + Shift + Esc', 'Ctrl + Alt + Delete', 'Win + Tab', 'Alt + F4'], jawaban: 0},
                    {soal: 'BIOS adalah singkatan dari...', pilihan: ['Basic Input Output System', 'Basic Internal Output System', 'Binary Input Output System', 'Basic Input Online System'], jawaban: 0},
                    {soal: 'Cookies pada browser berfungsi untuk...', pilihan: ['Menyimpan virus', 'Menyimpan data browsing', 'Menghapus data', 'Memperlambat internet'], jawaban: 1},
                    {soal: 'USB adalah singkatan dari...', pilihan: ['Universal Serial Bus', 'Universal System Bus', 'United Serial Bus', 'United System Bus'], jawaban: 0},
                    {soal: 'Malware adalah...', pilihan: ['Software baik', 'Software berbahaya', 'Software gratis', 'Software berbayar'], jawaban: 1},
                    {soal: 'Dual monitor berarti...', pilihan: ['Satu monitor', 'Dua monitor', 'Tiga monitor', 'Empat monitor'], jawaban: 1},
                    {soal: 'Download berarti...', pilihan: ['Mengirim data', 'Mengunduh data', 'Menghapus data', 'Menyimpan data'], jawaban: 1},
                    {soal: 'Upload berarti...', pilihan: ['Mengunduh data', 'Mengirim data', 'Menghapus data', 'Menyimpan data'], jawaban: 1},
                    {soal: 'Plugin pada browser adalah...', pilihan: ['Virus', 'Tambahan fitur', 'Penyimpanan', 'Hardware'], jawaban: 1},
                    {soal: 'Defragment digunakan untuk...', pilihan: ['Mengoptimalkan hard disk', 'Menghapus virus', 'Mempercepat RAM', 'Menyimpan data'], jawaban: 0}
                ],
                bab1: [
                    {soal: 'Komputer adalah perangkat elektronik yang dapat...', pilihan: ['Hanya menghitung', 'Memproses, menyimpan, dan mengeluarkan data', 'Hanya menyimpan data', 'Hanya menampilkan gambar'], jawaban: 1},
                    {soal: 'Komponen yang berfungsi memasukkan data adalah...', pilihan: ['Output Device', 'Input Device', 'Storage Device', 'Processing Device'], jawaban: 1},
                    {soal: 'Contoh input device adalah...', pilihan: ['Monitor', 'Printer', 'Mouse', 'Speaker'], jawaban: 2},
                    {soal: 'CPU memiliki fungsi utama untuk...', pilihan: ['Menyimpan data', 'Memproses data', 'Menampilkan data', 'Mengirim data'], jawaban: 1},
                    {soal: 'Perangkat yang menyimpan data permanen adalah...', pilihan: ['RAM', 'CPU', 'Hard Disk', 'Cache'], jawaban: 2},
                    {soal: 'Monitor termasuk dalam kategori...', pilihan: ['Input Device', 'Output Device', 'Storage Device', 'Processing Device'], jawaban: 1},
                    {soal: 'Yang bukan termasuk komponen utama komputer adalah...', pilihan: ['Input', 'Processing', 'Output', 'Decoration'], jawaban: 3},
                    {soal: 'Keyboard dan mouse termasuk...', pilihan: ['Output device', 'Input device', 'Storage device', 'Processing device'], jawaban: 1},
                    {soal: 'Printer menghasilkan output berupa...', pilihan: ['Suara', 'Gambar di layar', 'Dokumen tercetak', 'Data digital'], jawaban: 2},
                    {soal: 'Komputer bekerja berdasarkan...', pilihan: ['Keinginan sendiri', 'Instruksi program', 'Energi matahari', 'Gerakan manual'], jawaban: 1}
                ],
                bab2: [
                    {soal: 'Hardware adalah...', pilihan: ['Perangkat lunak', 'Perangkat keras', 'Data', 'Informasi'], jawaban: 1},
                    {soal: 'CPU adalah singkatan dari...', pilihan: ['Central Processing Unit', 'Computer Personal Unit', 'Central Program Unit', 'Central Power Unit'], jawaban: 0},
                    {soal: 'Fungsi RAM adalah...', pilihan: ['Penyimpanan permanen', 'Memori sementara', 'Memproses data', 'Menampilkan gambar'], jawaban: 1},
                    {soal: 'Motherboard berfungsi untuk...', pilihan: ['Menyimpan data', 'Menghubungkan komponen', 'Memproses data', 'Menampilkan video'], jawaban: 1},
                    {soal: 'Power Supply menyuplai...', pilihan: ['Data', 'Listrik', 'Informasi', 'Program'], jawaban: 1},
                    {soal: 'SSD adalah...', pilihan: ['Monitor', 'Penyimpanan data', 'Processor', 'RAM'], jawaban: 1},
                    {soal: 'VGA Card berfungsi untuk...', pilihan: ['Memproses suara', 'Memproses grafis', 'Menyimpan data', 'Mendinginkan sistem'], jawaban: 1},
                    {soal: 'Cooling fan berfungsi untuk...', pilihan: ['Mempercepat proses', 'Mendinginkan komponen', 'Menyimpan data', 'Menampilkan gambar'], jawaban: 1},
                    {soal: 'Hard Disk menggunakan piringan...', pilihan: ['Plastik', 'Magnetik', 'Kertas', 'Karet'], jawaban: 1},
                    {soal: 'Yang bukan hardware internal adalah...', pilihan: ['RAM', 'CPU', 'Monitor', 'Motherboard'], jawaban: 2}
                ],
                bab3: [
                    {soal: 'Software adalah...', pilihan: ['Perangkat keras', 'Perangkat lunak', 'Data', 'Hardware'], jawaban: 1},
                    {soal: 'Sistem operasi adalah...', pilihan: ['Hardware', 'Software dasar', 'Data', 'Internet'], jawaban: 1},
                    {soal: 'Contoh sistem operasi adalah...', pilihan: ['Microsoft Word', 'Windows', 'Google Chrome', 'Adobe Photoshop'], jawaban: 1},
                    {soal: 'Microsoft Office termasuk...', pilihan: ['Sistem Operasi', 'Aplikasi', 'Hardware', 'Driver'], jawaban: 1},
                    {soal: 'Browser digunakan untuk...', pilihan: ['Mengetik dokumen', 'Mengakses internet', 'Mengedit foto', 'Menghitung'], jawaban: 1},
                    {soal: 'Antivirus termasuk kategori...', pilihan: ['Sistem Operasi', 'Aplikasi', 'Utility Software', 'Hardware'], jawaban: 2},
                    {soal: 'Yang bukan sistem operasi adalah...', pilihan: ['Windows', 'Linux', 'MacOS', 'Microsoft Word'], jawaban: 3},
                    {soal: 'WinRAR digunakan untuk...', pilihan: ['Browsing', 'Kompresi file', 'Editing video', 'Gaming'], jawaban: 1},
                    {soal: 'Media player digunakan untuk...', pilihan: ['Mengetik', 'Memutar multimedia', 'Browsing', 'Menghitung'], jawaban: 1},
                    {soal: 'Driver adalah software yang...', pilihan: ['Menghubungkan hardware dengan OS', 'Membuat dokumen', 'Browsing internet', 'Gaming'], jawaban: 0}
                ],
                bab4: [
                    {soal: 'Shortcut Win + E digunakan untuk...', pilihan: ['Buka Desktop', 'Buka File Explorer', 'Buka Browser', 'Lock Screen'], jawaban: 1},
                    {soal: 'Taskbar terletak di...', pilihan: ['Atas layar', 'Bawah layar', 'Kiri layar', 'Tengah layar'], jawaban: 1},
                    {soal: 'Start Menu dibuka dengan tombol...', pilihan: ['Alt', 'Ctrl', 'Win', 'Shift'], jawaban: 2},
                    {soal: 'Alt + Tab digunakan untuk...', pilihan: ['Menutup program', 'Pindah antar aplikasi', 'Buka File Explorer', 'Screenshot'], jawaban: 1},
                    {soal: 'Win + D menampilkan...', pilihan: ['Start Menu', 'Desktop', 'Task Manager', 'Settings'], jawaban: 1},
                    {soal: 'Win + L digunakan untuk...', pilihan: ['Login', 'Lock komputer', 'Logout', 'Shutdown'], jawaban: 1},
                    {soal: 'Control Panel digunakan untuk...', pilihan: ['Gaming', 'Pengaturan sistem', 'Browsing', 'Editing'], jawaban: 1},
                    {soal: 'System tray terletak di...', pilihan: ['Kiri bawah', 'Kanan bawah', 'Tengah atas', 'Kiri atas'], jawaban: 1},
                    {soal: 'Recycle Bin berfungsi untuk...', pilihan: ['Menyimpan file penting', 'Tempat file terhapus', 'Backup data', 'Compress file'], jawaban: 1},
                    {soal: 'Shortcut Ctrl + Shift + Esc membuka...', pilihan: ['File Explorer', 'Task Manager', 'Control Panel', 'Settings'], jawaban: 1}
                ],
                bab5: [
                    {soal: 'Ctrl + C digunakan untuk...', pilihan: ['Cut', 'Copy', 'Paste', 'Delete'], jawaban: 1},
                    {soal: 'Ctrl + V digunakan untuk...', pilihan: ['Cut', 'Copy', 'Paste', 'Select All'], jawaban: 2},
                    {soal: 'Ctrl + X digunakan untuk...', pilihan: ['Cut', 'Copy', 'Paste', 'Undo'], jawaban: 0},
                    {soal: 'F2 digunakan untuk...', pilihan: ['Delete', 'Rename', 'Copy', 'Paste'], jawaban: 1},
                    {soal: 'Delete mengirim file ke...', pilihan: ['Hapus permanen', 'Recycle Bin', 'Desktop', 'Documents'], jawaban: 1},
                    {soal: 'Shift + Delete akan...', pilihan: ['Copy file', 'Hapus permanen', 'Ke Recycle Bin', 'Rename'], jawaban: 1},
                    {soal: 'Cara membuat folder baru adalah...', pilihan: ['Ctrl + N', 'Ctrl + Shift + N', 'Ctrl + F', 'Ctrl + D'], jawaban: 1},
                    {soal: 'Ekstensi file gambar adalah...', pilihan: ['.txt', '.jpg', '.exe', '.doc'], jawaban: 1},
                    {soal: 'Ekstensi file dokumen Word adalah...', pilihan: ['.txt', '.pdf', '.docx', '.jpg'], jawaban: 2},
                    {soal: 'Backup file sebaiknya dilakukan...', pilihan: ['Tidak perlu', 'Setiap hari', 'Berkala', 'Hanya sekali'], jawaban: 2}
                ],
                bab6: [
                    {soal: 'Home row pada keyboard adalah...', pilihan: ['QWER', 'ASDF JKL;', 'ZXCV', '1234'], jawaban: 1},
                    {soal: 'Jari telunjuk kiri posisi di tombol...', pilihan: ['A', 'S', 'D', 'F'], jawaban: 3},
                    {soal: 'Jari telunjuk kanan posisi di tombol...', pilihan: ['J', 'K', 'L', 'H'], jawaban: 0},
                    {soal: 'Saat mengetik, pandangan sebaiknya...', pilihan: ['Ke keyboard', 'Ke layar', 'Ke meja', 'Ke samping'], jawaban: 1},
                    {soal: 'Untuk mengetik cepat, gunakan...', pilihan: ['Hanya telunjuk', 'Semua jari', 'Hanya jempol', 'Hanya kelingking'], jawaban: 1},
                    {soal: 'Latihan mengetik sebaiknya...', pilihan: ['Sekali saja', 'Setiap hari', 'Seminggu sekali', 'Tidak perlu'], jawaban: 1},
                    {soal: 'Fokus awal latihan mengetik adalah...', pilihan: ['Kecepatan', 'Akurasi', 'Gaya', 'Suara'], jawaban: 1},
                    {soal: 'Posisi tangan saat mengetik sebaiknya...', pilihan: ['Tegang', 'Rileks', 'Kaku', 'Bergetar'], jawaban: 1},
                    {soal: 'Tombol spasi ditekan dengan...', pilihan: ['Jari telunjuk', 'Jari tengah', 'Jempol', 'Kelingking'], jawaban: 2},
                    {soal: 'Website untuk latihan mengetik adalah...', pilihan: ['Facebook', 'TypingClub', 'Instagram', 'YouTube'], jawaban: 1}
                ],
                bab7: [
                    {soal: 'Ekstensi file Microsoft Word adalah...', pilihan: ['.txt', '.docx', '.pdf', '.xlsx'], jawaban: 1},
                    {soal: 'Ctrl + B digunakan untuk...', pilihan: ['Italic', 'Bold', 'Underline', 'Center'], jawaban: 1},
                    {soal: 'Ctrl + I digunakan untuk...', pilihan: ['Bold', 'Italic', 'Underline', 'Save'], jawaban: 1},
                    {soal: 'Ctrl + U digunakan untuk...', pilihan: ['Bold', 'Italic', 'Underline', 'Cut'], jawaban: 2},
                    {soal: 'Ctrl + S digunakan untuk...', pilihan: ['Select All', 'Save', 'Search', 'Style'], jawaban: 1},
                    {soal: 'Ctrl + P digunakan untuk...', pilihan: ['Paste', 'Print', 'Preview', 'Page'], jawaban: 1},
                    {soal: 'Untuk meratakan teks ke tengah gunakan...', pilihan: ['Left align', 'Center align', 'Right align', 'Justify'], jawaban: 1},
                    {soal: 'Header terletak di bagian...', pilihan: ['Bawah', 'Atas', 'Tengah', 'Samping'], jawaban: 1},
                    {soal: 'Footer terletak di bagian...', pilihan: ['Atas', 'Bawah', 'Tengah', 'Samping'], jawaban: 1},
                    {soal: 'Page number digunakan untuk...', pilihan: ['Menghitung kata', 'Memberi nomor halaman', 'Mengatur margin', 'Menambah gambar'], jawaban: 1}
                ],
                bab8: [
                    {soal: 'WWW adalah singkatan dari...', pilihan: ['World Wide Web', 'World Web Wide', 'Wide World Web', 'Web World Wide'], jawaban: 0},
                    {soal: 'Browser digunakan untuk...', pilihan: ['Mengetik', 'Mengakses internet', 'Menghitung', 'Menggambar'], jawaban: 1},
                    {soal: 'Contoh browser adalah...', pilihan: ['Microsoft Word', 'Google Chrome', 'Windows', 'Photoshop'], jawaban: 1},
                    {soal: 'Search engine populer adalah...', pilihan: ['Facebook', 'Google', 'Instagram', 'WhatsApp'], jawaban: 1},
                    {soal: 'Email adalah singkatan dari...', pilihan: ['Electronic Mail', 'Electric Mail', 'Electronic Message', 'Electric Message'], jawaban: 0},
                    {soal: 'Phishing adalah...', pilihan: ['Software bagus', 'Penipuan online', 'Game online', 'Antivirus'], jawaban: 1},
                    {soal: 'Cyberbullying adalah...', pilihan: ['Game online', 'Perundungan di internet', 'Belajar online', 'Belanja online'], jawaban: 1},
                    {soal: 'Hoax adalah...', pilihan: ['Berita benar', 'Berita palsu', 'Aplikasi', 'Browser'], jawaban: 1},
                    {soal: 'Password sebaiknya...', pilihan: ['Dibagikan ke teman', 'Dirahasiakan', 'Ditulis di kertas', 'Sama dengan username'], jawaban: 1},
                    {soal: 'Etika digital adalah...', pilihan: ['Tidak penting', 'Aturan berperilaku di internet', 'Nama aplikasi', 'Jenis hardware'], jawaban: 1}
                ],
                posttest: [
                    {soal: 'CPU adalah singkatan dari...', pilihan: ['Central Processing Unit', 'Computer Personal Unit', 'Central Program Unit', 'Computer Processing Unit'], jawaban: 0},
                    {soal: 'Fungsi utama RAM adalah...', pilihan: ['Penyimpanan permanen', 'Memori sementara', 'Memproses grafis', 'Mendinginkan sistem'], jawaban: 1},
                    {soal: 'Sistem operasi yang dikembangkan Microsoft adalah...', pilihan: ['Linux', 'Windows', 'MacOS', 'Unix'], jawaban: 1},
                    {soal: 'Keyboard termasuk...', pilihan: ['Output device', 'Input device', 'Storage device', 'Processing device'], jawaban: 1},
                    {soal: 'Monitor termasuk...', pilihan: ['Input device', 'Output device', 'Storage device', 'Processing device'], jawaban: 1},
                    {soal: 'Hard Disk berfungsi untuk...', pilihan: ['Memproses data', 'Penyimpanan permanen', 'Memori sementara', 'Menampilkan gambar'], jawaban: 1},
                    {soal: 'Shortcut Ctrl + C untuk...', pilihan: ['Cut', 'Copy', 'Paste', 'Delete'], jawaban: 1},
                    {soal: 'Shortcut Ctrl + V untuk...', pilihan: ['Cut', 'Copy', 'Paste', 'Select'], jawaban: 2},
                    {soal: 'Shortcut Win + E untuk...', pilihan: ['Desktop', 'File Explorer', 'Browser', 'Settings'], jawaban: 1},
                    {soal: 'F2 digunakan untuk...', pilihan: ['Delete', 'Rename', 'Copy', 'Paste'], jawaban: 1},
                    {soal: 'Home row keyboard adalah...', pilihan: ['QWER', 'ASDF JKL;', 'ZXCV', '1234'], jawaban: 1},
                    {soal: 'Jari telunjuk kiri di tombol...', pilihan: ['A', 'S', 'D', 'F'], jawaban: 3},
                    {soal: 'Ctrl + B di Word untuk...', pilihan: ['Italic', 'Bold', 'Underline', 'Save'], jawaban: 1},
                    {soal: 'Ctrl + S untuk...', pilihan: ['Search', 'Save', 'Select', 'Style'], jawaban: 1},
                    {soal: 'WWW adalah singkatan dari...', pilihan: ['World Wide Web', 'World Web Wide', 'Wide World Web', 'Web World Wide'], jawaban: 0},
                    {soal: 'Browser untuk akses internet adalah...', pilihan: ['Word', 'Chrome', 'Excel', 'Paint'], jawaban: 1},
                    {soal: 'Email adalah singkatan dari...', pilihan: ['Electronic Mail', 'Electric Mail', 'Electronic Message', 'Electric Message'], jawaban: 0},
                    {soal: 'Phishing adalah...', pilihan: ['Software', 'Penipuan online', 'Game', 'Browser'], jawaban: 1},
                    {soal: 'Motherboard berfungsi...', pilihan: ['Menyimpan data', 'Menghubungkan komponen', 'Memproses data', 'Menampilkan video'], jawaban: 1},
                    {soal: 'VGA Card untuk...', pilihan: ['Suara', 'Grafis', 'Penyimpanan', 'Pendingin'], jawaban: 1},
                    {soal: 'Microsoft Office termasuk...', pilihan: ['OS', 'Aplikasi', 'Hardware', 'Driver'], jawaban: 1},
                    {soal: 'Antivirus termasuk...', pilihan: ['OS', 'Aplikasi', 'Utility', 'Hardware'], jawaban: 2},
                    {soal: 'Alt + Tab untuk...', pilihan: ['Menutup', 'Pindah aplikasi', 'Buka File', 'Screenshot'], jawaban: 1},
                    {soal: 'Win + L untuk...', pilihan: ['Login', 'Lock', 'Logout', 'Shutdown'], jawaban: 1},
                    {soal: 'Ctrl + X untuk...', pilihan: ['Cut', 'Copy', 'Paste', 'Undo'], jawaban: 0},
                    {soal: 'Delete mengirim ke...', pilihan: ['Hapus permanen', 'Recycle Bin', 'Desktop', 'Documents'], jawaban: 1},
                    {soal: 'Shift + Delete akan...', pilihan: ['Copy', 'Hapus permanen', 'Recycle Bin', 'Rename'], jawaban: 1},
                    {soal: 'Ekstensi file Word adalah...', pilihan: ['.txt', '.docx', '.pdf', '.xlsx'], jawaban: 1},
                    {soal: 'Jari telunjuk kanan di tombol...', pilihan: ['J', 'K', 'L', 'H'], jawaban: 0},
                    {soal: 'Fokus mengetik awal adalah...', pilihan: ['Kecepatan', 'Akurasi', 'Gaya', 'Suara'], jawaban: 1},
                    {soal: 'Ctrl + I di Word untuk...', pilihan: ['Bold', 'Italic', 'Underline', 'Save'], jawaban: 1},
                    {soal: 'Ctrl + P untuk...', pilihan: ['Paste', 'Print', 'Preview', 'Page'], jawaban: 1},
                    {soal: 'Header di bagian...', pilihan: ['Bawah', 'Atas', 'Tengah', 'Samping'], jawaban: 1},
                    {soal: 'Search engine populer...', pilihan: ['Facebook', 'Google', 'Instagram', 'WhatsApp'], jawaban: 1},
                    {soal: 'Hoax adalah...', pilihan: ['Berita benar', 'Berita palsu', 'Aplikasi', 'Browser'], jawaban: 1},
                    {soal: 'Password sebaiknya...', pilihan: ['Dibagikan', 'Dirahasiakan', 'Ditulis kertas', 'Sama username'], jawaban: 1},
                    {soal: 'Power Supply untuk...', pilihan: ['Data', 'Listrik', 'Informasi', 'Program'], jawaban: 1},
                    {soal: 'SSD adalah...', pilihan: ['Monitor', 'Penyimpanan', 'Processor', 'RAM'], jawaban: 1},
                    {soal: 'WinRAR untuk...', pilihan: ['Browsing', 'Kompresi file', 'Video', 'Gaming'], jawaban: 1},
                    {soal: 'Ctrl + Shift + N untuk...', pilihan: ['File baru', 'Folder baru', 'Window baru', 'Tab baru'], jawaban: 1},
                    {soal: 'Recycle Bin untuk...', pilihan: ['File penting', 'File terhapus', 'Backup', 'Compress'], jawaban: 1},
                    {soal: 'Ekstensi file gambar...', pilihan: ['.txt', '.jpg', '.exe', '.doc'], jawaban: 1},
                    {soal: 'Tombol spasi dengan...', pilihan: ['Telunjuk', 'Tengah', 'Jempol', 'Kelingking'], jawaban: 2},
                    {soal: 'Ctrl + U di Word untuk...', pilihan: ['Bold', 'Italic', 'Underline', 'Cut'], jawaban: 2},
                    {soal: 'Center align untuk...', pilihan: ['Kiri', 'Tengah', 'Kanan', 'Rata'], jawaban: 1},
                    {soal: 'Footer di bagian...', pilihan: ['Atas', 'Bawah', 'Tengah', 'Samping'], jawaban: 1},
                    {soal: 'Cyberbullying adalah...', pilihan: ['Game', 'Perundungan online', 'Belajar', 'Belanja'], jawaban: 1},
                    {soal: 'Etika digital adalah...', pilihan: ['Tidak penting', 'Aturan di internet', 'Aplikasi', 'Hardware'], jawaban: 1},
                    {soal: '1 GB sama dengan...', pilihan: ['1000 KB', '1000 MB', '1024 MB', '1024 KB'], jawaban: 2},
                    {soal: 'Printer termasuk...', pilihan: ['Input', 'Output', 'Storage', 'Processing'], jawaban: 1}
                ]
            }
        };

        // Generate dummy scores with significant improvement
        function generateScores() {
            const scores = {};
            SYSTEM_DATA.students.forEach(student => {
                const pretest = Math.floor(Math.random() * 30) + 40; // 40-70
                const improvement = Math.floor(Math.random() * 20) + 15; // +15 to +35
                const posttest = Math.min(100, pretest + improvement);
                
                const quizScores = [];
                for(let i = 1; i <= 8; i++) {
                    quizScores.push(Math.floor(Math.random() * 25) + 70); // 70-95
                }
                
                const avgQuiz = quizScores.reduce((a,b) => a+b, 0) / 8;
                const finalScore = Math.round((pretest + avgQuiz + posttest) / 3);
                
                scores[student.username] = {
                    pretest,
                    quizzes: quizScores,
                    posttest,
                    finalScore,
                    status: finalScore >= 70 ? 'Lulus' : 'Tidak Lulus',
                    completedBabs: [1,2,3,4,5,6,7,8],
                    xp: 100 + (8 * 50) + 200, // pretest + kuis + posttest
                    certificates: finalScore >= 70 ? ['Sertifikat Kelulusan TIK'] : []
                };
            });
            return scores;
        }

        // Generate attendance (95% hadir)
        function generateAttendance() {
            const attendance = {};
            const pertemuan = 8;
            SYSTEM_DATA.students.forEach(student => {
                const kehadiran = [];
                for(let i = 1; i <= pertemuan; i++) {
                    // 95% hadir
                    kehadiran.push(Math.random() < 0.95 ? 'Hadir' : (Math.random() < 0.5 ? 'Izin' : 'Sakit'));
                }
                const hadir = kehadiran.filter(k => k === 'Hadir').length;
                const persentase = Math.round((hadir / pertemuan) * 100);
                attendance[student.username] = {
                    records: kehadiran,
                    hadir,
                    izin: kehadiran.filter(k => k === 'Izin').length,
                    sakit: kehadiran.filter(k => k === 'Sakit').length,
                    alpha: kehadiran.filter(k => k === 'Alpha').length,
                    persentase
                };
            });
            return attendance;
        }

        // Generate feedback
        function generateFeedbacks() {
            const feedbacks = [];
            const comments = [
                'Materinya sangat mudah dipahami dan menarik!',
                'Video pembelajarannya bagus, saya jadi lebih paham',
                'Kuis-kuisnya membantu saya mengingat materi',
                'Sistem badge dan XP membuat belajar lebih seru',
                'Terima kasih atas pembelajaran yang menyenangkan',
                'Materi TIK jadi lebih mudah dengan e-learning ini',
                'Sangat membantu untuk belajar komputer dari dasar'
            ];
            
            const babFavorit = ['Bab 1', 'Bab 2', 'Bab 3', 'Bab 4', 'Bab 5', 'Bab 6', 'Bab 7', 'Bab 8'];
            const babSulit = ['Bab 6', 'Bab 7', 'Bab 8', 'Bab 5', 'Bab 4'];
            
            // Random 25-28 siswa memberikan feedback (sekitar 87%)
            const feedbackCount = Math.floor(Math.random() * 4) + 25;
            const shuffled = [...SYSTEM_DATA.students].sort(() => 0.5 - Math.random());
            
            for(let i = 0; i < feedbackCount; i++) {
                const student = shuffled[i];
                feedbacks.push({
                    nama: student.nama,
                    kelas: student.kelas,
                    rating: Math.floor(Math.random() * 2) + 4, // 4-5 stars
                    babFavorit: babFavorit[Math.floor(Math.random() * babFavorit.length)],
                    babSulit: babSulit[Math.floor(Math.random() * babSulit.length)],
                    komentar: comments[Math.floor(Math.random() * comments.length)],
                    tanggal: new Date(2025, 9, Math.floor(Math.random() * 29) + 1).toLocaleDateString('id-ID')
                });
            }
            
            return feedbacks;
        }

        // Initialize data
        if(!localStorage.getItem('studentScores')) {
            localStorage.setItem('studentScores', JSON.stringify(generateScores()));
        }
        if(!localStorage.getItem('attendance')) {
            localStorage.setItem('attendance', JSON.stringify(generateAttendance()));
        }
        if(!localStorage.getItem('feedbacks')) {
            localStorage.setItem('feedbacks', JSON.stringify(generateFeedbacks()));
        }
        if(!localStorage.getItem('badges')) {
            const badges = {};
            SYSTEM_DATA.students.forEach(s => {
                badges[s.username] = [];
            });
            localStorage.setItem('badges', JSON.stringify(badges));
        }
        
        // FITUR BARU: Simpan dan load students dari localStorage
        if(!localStorage.getItem('students')) {
            // Pertama kali, simpan data default students
            localStorage.setItem('students', JSON.stringify(SYSTEM_DATA.students));
        } else {
            // Load students dari localStorage (termasuk yang ditambah user)
            SYSTEM_DATA.students = JSON.parse(localStorage.getItem('students'));
        }

        let currentUser = null;
        let currentFilter = 'all';

        // Login Function
        function login(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Check teacher
            if(username === SYSTEM_DATA.teacher.username && password === SYSTEM_DATA.teacher.password) {
                currentUser = {...SYSTEM_DATA.teacher, role: 'teacher'};
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('teacherDashboard').classList.remove('hidden');
                loadTeacherDashboard();
                return;
            }

            // Check student
            const student = SYSTEM_DATA.students.find(s => s.username === username && s.password === password);
            if(student) {
                currentUser = {...student, role: 'student'};
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('studentDashboard').classList.remove('hidden');
                loadStudentDashboard();
                return;
            }

            alert('Username atau password salah!');
        }

        // Logout
        function logout() {
            currentUser = null;
            document.getElementById('studentDashboard').classList.add('hidden');
            document.getElementById('teacherDashboard').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        // Load Student Dashboard
        function loadStudentDashboard() {
            document.getElementById('studentNameNav').textContent = currentUser.nama;
            document.getElementById('studentClassNav').textContent = `Kelas ${currentUser.kelas}`;

            const scores = JSON.parse(localStorage.getItem('studentScores'))[currentUser.username];
            
            // Stats Cards
            const statsHTML = `
                <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg p-6 fade-soft hover-rise text-white fade-in">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-blue-100 text-sm">Total XP</p>
                            <p class="text-4xl font-bold mt-2">${scores.xp}</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-4">
                            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-lg p-6 fade-soft hover-rise text-white fade-in">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-green-100 text-sm">Badge Terkumpul</p>
                            <p class="text-4xl font-bold mt-2">${scores.completedBabs.length}/8</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-4">
                            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl shadow-lg p-6 fade-soft hover-rise text-white fade-in">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-yellow-100 text-sm">Nilai Akhir</p>
                            <p class="text-4xl font-bold mt-2">${scores.finalScore}</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-4">
                            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl shadow-lg p-6 fade-soft hover-rise text-white fade-in">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-purple-100 text-sm">Status</p>
                            <p class="text-2xl font-bold mt-2">${scores.status}</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-full p-4">
                            ${scores.status === 'Lulus' ? 
                                '<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>' :
                                '<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'
                            }
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('studentStats').innerHTML = statsHTML;

            loadMateriList();
        }

        // Load Materi List
        function loadMateriList() {
            const scores = JSON.parse(localStorage.getItem('studentScores'))[currentUser.username];
            let html = '<div class="grid grid-cols-1 md:grid-cols-2 gap-6">';

            // Pretest Card
            html += `
                <div class="bg-gradient-to-br from-red-500 to-red-600 rounded-2xl shadow-lg p-6 fade-soft hover-rise text-white fade-in">
                    <h3 class="text-2xl font-bold mb-2">ğŸ“ Pre-Test</h3>
                    <p class="mb-4 text-red-100">Tes awal sebelum belajar (50 soal)</p>
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm">Nilai: <span class="text-2xl font-bold">${scores.pretest}</span></p>
                            <p class="text-sm mt-1">XP: 100</p>
                        </div>
                        <button class="bg-white bg-opacity-20 px-4 py-2 rounded-lg font-bold" onclick="QA.open(\'pretest\')">Lihat Pre-Test</button>
                    </div>
                </div>
            `;

            // Materi Cards
            SYSTEM_DATA.materi.forEach((materi, index) => {
                const completed = scores.completedBabs.includes(materi.id);
                const quizScore = scores.quizzes[index];
                html += `
                    <div class="bg-white rounded-2xl shadow-lg p-6 fade-in hover:shadow-xl transition">
                        <img src="${materi.gambar}" alt="${materi.judul}" class="w-full h-40 object-cover rounded-lg mb-4">
                        <h3 class="text-xl font-bold mb-2">${materi.judul}</h3>
                        <p class="text-gray-600 mb-4">${materi.deskripsi}</p>
                        <div class="flex items-center justify-between">
                            <div>
                                ${completed ? `
                                    <p class="text-sm text-green-600 font-semibold">âœ“ Selesai</p>
                                    <p class="text-sm">Nilai: ${quizScore} | XP: +50</p>
                                ` : `
                                    <p class="text-sm text-gray-500">Belum Selesai</p>
                                `}
                            </div>
                            <button onclick="openMateri(${materi.id})" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition">
                                ${completed ? 'Lihat' : 'Mulai'}
                            </button>
                        </div>
                    </div>
                `;
            });

            // Posttest Card
            html += `
                <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-lg p-6 fade-soft hover-rise text-white fade-in">
                    <h3 class="text-2xl font-bold mb-2">âœ… Post-Test</h3>
                    <p class="mb-4 text-green-100">Tes akhir setelah belajar semua materi (50 soal)</p>
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm">Nilai: <span class="text-2xl font-bold">${scores.posttest}</span></p>
                            <p class="text-sm mt-1">XP: 200</p>
                        </div>
                        <button class="bg-white bg-opacity-20 px-4 py-2 rounded-lg font-bold" onclick="QA.open(\'posttest\')">Lihat Post-Test</button>
                    </div>
                </div>
            `;

            html += '</div>';
            document.getElementById('materiList').innerHTML = html;
        }

        // Open Materi Modal
        function openMateri(materiId) {
            const materi = SYSTEM_DATA.materi.find(m => m.id === materiId);
            const modalContent = `
                <div class="bg-gradient-to-br from-gray-50 to-blue-50">
                    <div class="sticky top-0 bg-white shadow-md z-10 p-6 flex justify-between items-center border-b-4 border-blue-500">
                        <div>
                            <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
                                ${materi.judul}
                            </h2>
                            <p class="text-gray-600 mt-1">${materi.deskripsi}</p>
                        </div>
                        <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 text-4xl font-light transition hover:rotate-90 duration-300">
                            &times;
                        </button>
                    </div>
                    
                    <div class="p-8">
                        <img src="${materi.gambar}" alt="${materi.judul}" 
                            class="w-full h-80 object-cover rounded-2xl shadow-2xl mb-8 hover:scale-105 transition duration-300">
                        
                        <div class="mb-8">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="bg-red-500 rounded-full p-2">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-800">Video Pembelajaran</h3>
                            </div>
                            <div class="relative rounded-2xl overflow-hidden shadow-2xl bg-black" style="padding-bottom: 56.25%;">
                                <iframe src="${(() => {const v=(materi.video||'').replace('watch?v=','embed/'); return v + (v.includes('?')?'&':'?') + 'rel=0&modestbranding=1';})()}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" loading="lazy" allowfullscreen class="absolute top-0 left-0 w-full h-full"></iframe>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
                            <div class="flex items-center space-x-3 mb-6">
                                <div class="bg-blue-500 rounded-full p-2">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-800">Materi Pembelajaran</h3>
                            </div>
                            <div class="prose prose-lg max-w-none">
                                ${materi.konten}
                            </div>
                        </div>
                        
                        <div class="sticky bottom-0 pt-6">
                            <button onclick="startQuiz(${materiId})" 
                                class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-6 rounded-2xl font-bold text-xl 
                                hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center space-x-3">
                                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                                </svg>
                                <span>Kerjakan Kuis Bab ${materiId}</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('modalContent').innerHTML = modalContent;
            document.getElementById('modalOverlay').classList.remove('hidden');
            document.getElementById('modalOverlay').classList.add('flex');
        }

        // Start Quiz
        function startQuiz(babId) {
            const quizKey = `bab${babId}`;
            const questions = SYSTEM_DATA.quizBank[quizKey];
            const scores = JSON.parse(localStorage.getItem('studentScores'));
            const userScore = scores[currentUser.username];
            
            let html = `
                <div class="p-8 bg-gradient-to-br from-blue-50 to-indigo-50">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">Kuis Bab ${babId}</h2>
                            <p class="text-gray-600 mt-2">Uji pemahaman Anda tentang materi yang sudah dipelajari</p>
                        </div>
                        <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 text-4xl font-light transition">&times;</button>
                    </div>
                    
                    <div class="mb-8 p-6 bg-white rounded-2xl shadow-lg border-l-4 border-blue-500">
                        <div class="flex items-start space-x-4">
                            <div class="bg-blue-100 rounded-full p-3">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <h3 class="font-bold text-gray-800 mb-2">ğŸ“‹ Petunjuk Pengerjaan</h3>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>â€¢ Kuis terdiri dari <strong>10 soal pilihan ganda</strong></li>
                                    <li>â€¢ Pilih jawaban yang paling tepat untuk setiap soal</li>
                                    <li>â€¢ Nilai minimal lulus adalah <strong>70</strong></li>
                                    <li>â€¢ Setelah lulus, Anda akan mendapat <strong>+50 XP dan Badge</strong></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <form id="quizForm" class="space-y-6">
            `;
            
            questions.forEach((q, index) => {
                const colors = ['from-blue-500 to-blue-600', 'from-green-500 to-green-600', 'from-purple-500 to-purple-600', 'from-orange-500 to-orange-600', 'from-pink-500 to-pink-600'];
                const bgColor = colors[index % colors.length];
                
                html += `
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300">
                        <div class="bg-gradient-to-r ${bgColor} p-4 flex items-center space-x-3">
                            <div class="bg-white bg-opacity-30 rounded-full w-10 h-10 flex items-center justify-center">
                                <span class="text-white font-bold text-lg">${index + 1}</span>
                            </div>
                            <p class="text-white font-semibold text-lg flex-1">${q.soal}</p>
                        </div>
                        <div class="p-6">
                            <div class="space-y-3">
                                ${q.pilihan.map((p, i) => {
                                    const optionLabels = ['A', 'B', 'C', 'D'];
                                    return `
                                        <label class="flex items-center space-x-4 cursor-pointer group">
                                            <input type="radio" name="q${index}" value="${i}" required 
                                                class="w-5 h-5 text-blue-600 border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 cursor-pointer">
                                            <div class="flex-1 p-4 rounded-xl border-2 border-gray-200 group-hover:border-blue-400 group-hover:bg-blue-50 transition-all duration-200">
                                                <div class="flex items-center space-x-3">
                                                    <span class="bg-gray-100 text-gray-700 font-bold rounded-full w-8 h-8 flex items-center justify-center text-sm group-hover:bg-blue-100 group-hover:text-blue-700 transition">
                                                        ${optionLabels[i]}
                                                    </span>
                                                    <span class="text-gray-700 font-medium">${p}</span>
                                                </div>
                                            </div>
                                        </label>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += `
                    <div class="sticky bottom-0 pt-6">
                        <button type="button" onclick="submitQuiz(${babId})" 
                            class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-5 rounded-2xl font-bold text-xl 
                            hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center space-x-3">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>Submit Jawaban</span>
                        </button>
                    </div>
                </form>
                </div>
            `;
            
            document.getElementById('modalContent').innerHTML = html;
        }

        // Submit Quiz (simulated - already has score)
        function submitQuiz(babId) {
            const scores = JSON.parse(localStorage.getItem('studentScores'));
            const userScore = scores[currentUser.username];
            const quizScore = userScore.quizzes[babId - 1];
            
            alert(`Kuis selesai!\nNilai Anda: ${quizScore}\n\n${quizScore >= 70 ? 'âœ“ Lulus! Badge Bab ' + babId + ' diperoleh! +50 XP' : 'âœ— Tidak lulus. Nilai minimum 70.'}`);
            closeModal();
            loadStudentDashboard();
        }

        // Close Modal
        function closeModal() {
            document.getElementById('modalOverlay').classList.add('hidden');
            document.getElementById('modalOverlay').classList.remove('flex');
        }

        // Show Student Tab
        function showStudentTab(tab) {
            ['materi', 'absensi', 'leaderboard', 'badges', 'feedback'].forEach(t => {
                document.getElementById(`tab${t.charAt(0).toUpperCase() + t.slice(1)}`).classList.remove('border-blue-600', 'text-blue-600');
                document.getElementById(`tab${t.charAt(0).toUpperCase() + t.slice(1)}`).classList.add('text-gray-600');
                document.getElementById(`tabContent${t.charAt(0).toUpperCase() + t.slice(1)}`).classList.add('hidden');
            });
            
            document.getElementById(`tab${tab.charAt(0).toUpperCase() + tab.slice(1)}`).classList.add('border-blue-600', 'text-blue-600');
            document.getElementById(`tab${tab.charAt(0).toUpperCase() + tab.slice(1)}`).classList.remove('text-gray-600');
            document.getElementById(`tabContent${tab.charAt(0).toUpperCase() + tab.slice(1)}`).classList.remove('hidden');
            
            if(tab === 'absensi') loadAbsensiSiswa();
            if(tab === 'leaderboard') loadLeaderboard();
            if(tab === 'badges') loadBadges();
            if(tab === 'feedback') loadFeedbackForm();
        }

        // Load Absensi Siswa
        function loadAbsensiSiswa() {
            const attendance = JSON.parse(localStorage.getItem('attendance'));
            const userAtt = attendance[currentUser.username];
            
            let html = `
                <div class="max-w-4xl mx-auto">
                    <h3 class="text-2xl font-bold mb-6 text-center">âœ… Rekap Kehadiran Saya</h3>
                    
                    <!-- Summary Cards -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white text-center">
                            <p class="text-3xl font-bold">${userAtt.hadir}</p>
                            <p class="text-sm mt-1">Hadir</p>
                        </div>
                        <div class="bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl p-4 text-white text-center">
                            <p class="text-3xl font-bold">${userAtt.izin}</p>
                            <p class="text-sm mt-1">Izin</p>
                        </div>
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white text-center">
                            <p class="text-3xl font-bold">${userAtt.sakit}</p>
                            <p class="text-sm mt-1">Sakit</p>
                        </div>
                        <div class="bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-4 text-white text-center">
                            <p class="text-3xl font-bold">${userAtt.alpha}</p>
                            <p class="text-sm mt-1">Alpha</p>
                        </div>
                    </div>
                    
                    <!-- Persentase Kehadiran -->
                    <div class="bg-white rounded-xl p-6 shadow-lg mb-8">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-bold">Persentase Kehadiran</h4>
                            <span class="text-3xl font-bold ${userAtt.persentase >= 90 ? 'text-green-600' : userAtt.persentase >= 80 ? 'text-yellow-600' : 'text-red-600'}">${userAtt.persentase}%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-6">
                            <div class="h-6 rounded-full ${userAtt.persentase >= 90 ? 'bg-green-500' : userAtt.persentase >= 80 ? 'bg-yellow-500' : 'bg-red-500'}" style="width: ${userAtt.persentase}%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-2">
                            ${userAtt.persentase >= 90 ? 'âœ“ Kehadiran sangat baik!' : userAtt.persentase >= 80 ? 'âš  Kehadiran cukup baik' : 'âœ— Tingkatkan kehadiran Anda'}
                        </p>
                    </div>
                    
                    <!-- Detail Kehadiran Per Pertemuan -->
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h4 class="text-lg font-bold mb-4">Detail Kehadiran Per Pertemuan</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            `;
            
            userAtt.records.forEach((status, index) => {
                const statusColors = {
                    'Hadir': 'bg-green-100 text-green-700 border-green-300',
                    'Izin': 'bg-yellow-100 text-yellow-700 border-yellow-300',
                    'Sakit': 'bg-blue-100 text-blue-700 border-blue-300',
                    'Alpha': 'bg-red-100 text-red-700 border-red-300'
                };
                
                html += `
                    <div class="border-2 ${statusColors[status]} rounded-lg p-3 text-center">
                        <p class="text-sm font-semibold">Pertemuan ${index + 1}</p>
                        <p class="text-xs mt-1">${status}</p>
                    </div>
                `;
            });
            
            html += `
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('absensiSiswaContent').innerHTML = html;
        }

        // Load Leaderboard
        function loadLeaderboard() {
    // Null-safe parse of localStorage
    let raw = localStorage.getItem('studentScores');
    let scores = null;
    try { scores = raw ? JSON.parse(raw) : null; } catch(e) { scores = null; }
    if(!scores || typeof scores !== 'object' || Array.isArray(scores)) {
        // regenerate from SYSTEM_DATA if missing/corrupt
        scores = generateScores();
        localStorage.setItem('studentScores', JSON.stringify(scores));
    }
    const students = Array.isArray(SYSTEM_DATA?.students) ? SYSTEM_DATA.students : [];
    const leaderboard = Object.entries(scores).map(([username, data]) => {
        const student = students.find(s => s.username === username) || {nama: username, kelas: '-'};
        return {
            nama: student.nama,
            kelas: student.kelas,
            xp: data?.xp || 0,
            finalScore: data?.finalScore || 0
        };
    }).sort((a,b) => b.xp - a.xp);

    let html = '<div class="space-y-4">';
    html += '<h3 class="text-2xl font-bold mb-6 text-center">ğŸ† Leaderboard Kelas 8</h3>';
    if(leaderboard.length === 0){
        html += '<div class="p-4 border rounded-xl bg-yellow-50 text-sm text-slate-700">Belum ada data skor. Silakan buka Pretest/Kuis/Posttest terlebih dahulu atau klik tombol Reset Data.</div>';
    } else {
        leaderboard.forEach((student, index) => {
            html += `
            <div class="flex items-center justify-between p-4 rounded-xl border bg-white">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 rounded-lg grid place-items-center text-white" style="background:linear-gradient(135deg,#7C3AED,#38BDF8);">${index+1}</div>
                    <div>
                        <div class="font-bold">${student.nama}</div>
                        <div class="text-xs text-slate-500">${student.kelas}</div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-sm"><span class="font-semibold">${student.xp}</span> XP</div>
                    <div class="text-xs text-slate-500">Nilai Akhir: ${student.finalScore}</div>
                </div>
            </div>`;
        });
    }
    html += '</div>';
    document.getElementById('leaderboardContent').innerHTML = html;
}
        // Load Badges
        function loadBadges() {
            const scores = JSON.parse(localStorage.getItem('studentScores'))[currentUser.username];
            const badges = [
                {id: 1, name: 'Pengenalan Komputer', icon: 'ğŸ’»'},
                {id: 2, name: 'Hardware Expert', icon: 'ğŸ”§'},
                {id: 3, name: 'Software Master', icon: 'ğŸ“±'},
                {id: 4, name: 'Windows Navigator', icon: 'ğŸªŸ'},
                {id: 5, name: 'File Manager', icon: 'ğŸ“'},
                {id: 6, name: 'Typing Pro', icon: 'âŒ¨ï¸'},
                {id: 7, name: 'Word Wizard', icon: 'ğŸ“'},
                {id: 8, name: 'Digital Citizen', icon: 'ğŸŒ'}
            ];

            let html = '<div class="grid grid-cols-2 md:grid-cols-4 gap-6">';
            badges.forEach(badge => {
                const earned = scores.completedBabs.includes(badge.id);
                html += `
                    <div class="text-center ${earned ? 'badge-earned' : 'badge-locked'} cursor-pointer">
                        <div class="bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-4 text-5xl shadow-lg">
                            ${badge.icon}
                        </div>
                        <p class="font-bold">${badge.name}</p>
                        <p class="text-sm ${earned ? 'text-green-600' : 'text-gray-400'}">${earned ? 'âœ“ Terbuka' : 'ğŸ”’ Terkunci'}</p>
                    </div>
                `;
            });
            html += '</div>';

            html += `
                <div class="mt-8 p-6 bg-blue-50 rounded-xl">
                    <h3 class="text-xl font-bold mb-2">Progress Badge</h3>
                    <div class="flex items-center space-x-4">
                        <div class="flex-1 bg-gray-200 rounded-full h-4">
                            <div class="bg-gradient-to-r from-blue-600 to-indigo-600 h-4 rounded-full" style="width: ${(scores.completedBabs.length / 8) * 100}%"></div>
                        </div>
                        <span class="font-bold">${scores.completedBabs.length}/8</span>
                    </div>
                </div>
            `;

            document.getElementById('badgesContent').innerHTML = html;
        }

        // Load Feedback Form
        function loadFeedbackForm() {
            const html = `
                <div class="max-w-2xl mx-auto">
                    <h3 class="text-2xl font-bold mb-6 text-center">ğŸ’¬ Berikan Feedback</h3>
                    <form onsubmit="submitFeedback(event)" class="space-y-6">
                        <div>
                            <label class="block font-semibold mb-2">Rating Pembelajaran</label>
                            <div class="flex space-x-4">
                                ${[1,2,3,4,5].map(i => `
                                    <label class="cursor-pointer">
                                        <input type="radio" name="rating" value="${i}" required class="hidden peer">
                                        <span class="text-4xl peer-checked:scale-125 transition">â­</span>
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div>
                            <label class="block font-semibold mb-2">Bab Favorit</label>
                            <select name="babFavorit" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500">
                                <option value="">Pilih Bab</option>
                                ${SYSTEM_DATA.materi.map(m => `<option value="Bab ${m.id}">Bab ${m.id} - ${m.judul}</option>`).join('')}
                            </select>
                        </div>
                        
                        <div>
                            <label class="block font-semibold mb-2">Bab Paling Sulit</label>
                            <select name="babSulit" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500">
                                <option value="">Pilih Bab</option>
                                ${SYSTEM_DATA.materi.map(m => `<option value="Bab ${m.id}">Bab ${m.id} - ${m.judul}</option>`).join('')}
                            </select>
                        </div>
                        
                        <div>
                            <label class="block font-semibold mb-2">Komentar & Saran</label>
                            <textarea name="komentar" required rows="5" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500" placeholder="Bagikan pengalaman belajar Anda..."></textarea>
                        </div>
                        
                        <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 rounded-lg font-bold text-lg hover:shadow-lg transition">
                            Kirim Feedback
                        </button>
                    </form>
                </div>
            `;
            document.getElementById('feedbackForm').innerHTML = html;
        }

        // Submit Feedback
        function submitFeedback(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const feedbacks = JSON.parse(localStorage.getItem('feedbacks') || '[]');
            
            feedbacks.push({
                nama: currentUser.nama,
                kelas: currentUser.kelas,
                rating: parseInt(formData.get('rating')),
                babFavorit: formData.get('babFavorit'),
                babSulit: formData.get('babSulit'),
                komentar: formData.get('komentar'),
                tanggal: new Date().toLocaleDateString('id-ID')
            });
            
            localStorage.setItem('feedbacks', JSON.stringify(feedbacks));
            alert('âœ“ Terima kasih atas feedback Anda!');
            event.target.reset();
        }

        // Teacher Dashboard
        function loadTeacherDashboard() {
            showTeacherTab('analytics');
        }

        // Filter Class
        function filterClass(kelas) {
            currentFilter = kelas;
            ['filterAll', 'filterVIIIa', 'filterVIIIb'].forEach(id => {
                document.getElementById(id).classList.remove('bg-blue-600', 'text-white');
                document.getElementById(id).classList.add('bg-gray-200', 'text-gray-700');
            });
            
            const buttonId = kelas === 'all' ? 'filterAll' : `filter${kelas}`;
            document.getElementById(buttonId).classList.remove('bg-gray-200', 'text-gray-700');
            document.getElementById(buttonId).classList.add('bg-blue-600', 'text-white');
            
            // Reload current tab
            const activeTab = document.querySelector('[id^="teacherTab"][class*="border-purple-600"]').id.replace('teacherTab', '').toLowerCase();
            showTeacherTab(activeTab);
        }

        // Show Teacher Tab
        function showTeacherTab(tab) {
            // Helper function untuk convert tab name ke PascalCase
            function toPascalCase(str) {
                return str.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join('');
            }
            
            ['analytics', 'students', 'kelola-siswa', 'absensi', 'feedbacks'].forEach(t => {
                const tabName = toPascalCase(t);
                const tabEl = document.getElementById(`teacherTab${tabName}`);
                const contentEl = document.getElementById(`teacherTabContent${tabName}`);
                if(tabEl) {
                    tabEl.classList.remove('border-purple-600', 'text-purple-600');
                    tabEl.classList.add('text-gray-600');
                }
                if(contentEl) {
                    contentEl.classList.add('hidden');
                }
            });
            
            const tabName = toPascalCase(tab);
            document.getElementById(`teacherTab${tabName}`).classList.add('border-purple-600', 'text-purple-600');
            document.getElementById(`teacherTab${tabName}`).classList.remove('text-gray-600');
            document.getElementById(`teacherTabContent${tabName}`).classList.remove('hidden');
            
            if(tab === 'analytics') loadAnalytics();
            if(tab === 'students') loadStudentsTable();
            if(tab === 'kelola-siswa') loadKelolaSiswa();
            if(tab === 'absensi') loadAbsensi();
            if(tab === 'feedbacks') loadFeedbacksView();
        }

        // Load Analytics with Charts
        function loadAnalytics() {
            const scores = JSON.parse(localStorage.getItem('studentScores'));
            let students = SYSTEM_DATA.students;
            if(currentFilter !== 'all') {
                students = students.filter(s => s.kelas === currentFilter);
            }
            
            let html = `
                <div class="space-y-8">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-lg font-bold mb-4">ğŸ“Š Pretest vs Posttest</h3>
                            <canvas id="chartPretestPosttest"></canvas>
                            <div class="mt-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                <p class="text-sm text-gray-700"><span class="font-semibold">ğŸ’¡ Insight:</span> <span id="insightPretest"></span></p>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-lg font-bold mb-4">ğŸ“ˆ Distribusi Nilai Siswa</h3>
                            <canvas id="chartNilaiDistribusi"></canvas>
                            <div class="mt-4 p-4 bg-green-50 rounded-lg border-l-4 border-green-500">
                                <p class="text-sm text-gray-700"><span class="font-semibold">ğŸ’¡ Insight:</span> <span id="insightDistribusi"></span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-lg font-bold mb-4">âœ… Tingkat Kehadiran</h3>
                            <canvas id="chartAbsensi"></canvas>
                            <div class="mt-4 p-4 bg-yellow-50 rounded-lg border-l-4 border-yellow-500">
                                <p class="text-sm text-gray-700"><span class="font-semibold">ğŸ’¡ Insight:</span> <span id="insightAbsensi"></span></p>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-lg font-bold mb-4">ğŸ“š Nilai Per Materi (Bab 1-8)</h3>
                            <canvas id="chartNilaiPerMateri"></canvas>
                            <div class="mt-4 p-4 bg-purple-50 rounded-lg border-l-4 border-purple-500">
                                <p class="text-sm text-gray-700"><span class="font-semibold">ğŸ’¡ Insight:</span> <span id="insightMateri"></span></p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('analyticsContent').innerHTML = html;
            
            // Wait for DOM to render
            setTimeout(() => {
                // Chart 1: Pretest vs Posttest
                const pretestData = students.map(s => scores[s.username].pretest);
                const posttestData = students.map(s => scores[s.username].posttest);
                
                new Chart(document.getElementById('chartPretestPosttest'), {
                    type: 'bar',
                    data: {
                        labels: students.map(s => s.nama.split(' ')[0]),
                        datasets: [{
                            label: 'Pretest',
                            data: pretestData,
                            backgroundColor: 'rgba(239, 68, 68, 0.7)',
                        },
  
{
    id: 9,
    judul: 'Evaluasi & Refleksi',
    deskripsi: 'Refleksi, rencana aksi, dan sertifikat',
    gambar: '',
    video: '',
    konten: `<div class="space-y-6">
  <header class="rounded-2xl border p-5 bg-gradient-to-r from-purple-50 to-sky-50">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl grid place-items-center text-white" style="background:linear-gradient(135deg,#7C3AED,#38BDF8);">ğŸ§­</div>
      <div>
        <h3 class="text-2xl font-extrabold text-slate-900">Evaluasi & Refleksi</h3>
        <p class="text-slate-600">Refleksi pembelajaran, rencana perbaikan, dan sertifikat</p>
      </div>
    </div>
  </header>

  <section class="grid md:grid-cols-2 gap-4">
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">Refleksi Diri</h4>
      <ol class="list-decimal list-inside text-sm text-slate-700 space-y-1">
        <li>Sebut 3 hal baru yang kamu kuasai.</li>
        <li>Tentukan 1 kebiasaan digital baik yang ingin kamu pertahankan.</li>
        <li>Tuliskan 1 kelemahan yang akan kamu perbaiki minggu depan.</li>
      </ol>
    </div>
    <div class="p-5 rounded-xl border bg-white">
      <h4 class="font-bold mb-2">Checklist Keterampilan</h4>
      <ul class="list-disc list-inside text-sm text-slate-700 space-y-1">
        <li>IPSO, hardware vs software</li>
        <li>Navigasi Windows & manajemen file</li>
        <li>Mengetik 10 jari (dasar), Word dasar</li>
        <li>Higienis digital (password & 2FA)</li>
      </ul>
    </div>
  </section>

  <section class="p-5 rounded-xl border bg-white">
    <h4 class="font-bold mb-2">Rencana Aksi 7 Hari</h4>
    <div class="grid md:grid-cols-2 gap-3 text-sm">
      <div class="p-3 rounded-lg border">
        <p class="font-semibold mb-1">Hari 1â€“3</p>
        <ul class="list-disc list-inside text-slate-700 space-y-1">
          <li>Latihan shortcut Windows & split screen</li>
          <li>Rapikan folder TIK_KelasVIII</li>
        </ul>
      </div>
      <div class="p-3 rounded-lg border">
        <p class="font-semibold mb-1">Hari 4â€“7</p>
        <ul class="list-disc list-inside text-slate-700 space-y-1">
          <li>Typing 10 menit/hari</li>
          <li>Buat 1 dokumen Word rapi (PDF)</li>
        </ul>
      </div>
    </div>
  </section>

  <section class="p-5 rounded-2xl border bg-gradient-to-r from-purple-50 to-blue-50">
    <h4 class="font-extrabold mb-2">Sertifikat Kelulusan</h4>
    <p class="text-sm text-slate-700">Jika nilai Posttest â‰¥ KKM, kamu berhak mendapatkan sertifikat. Klik tombol di bawah ini untuk membuat sertifikat.</p>
    <button onclick="window.openCertificateModal && window.openCertificateModal()" class="mt-3 px-4 py-2 rounded-xl border font-semibold hover:shadow-md">Buka Sertifikat</button>
  </section>
</div>`
  },
 {
                            label: 'Posttest',
                            data: posttestData,
                            backgroundColor: 'rgba(34, 197, 94, 0.7)',
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        scales: {
                            y: {beginAtZero: true, max: 100}
                        }
                    }
                });
                
                // Chart 2: Distribusi Nilai
                const nilaiData = students.map(s => scores[s.username].finalScore);
                new Chart(document.getElementById('chartNilaiDistribusi'), {
                    type: 'line',
                    data: {
                        labels: students.map(s => s.nama.split(' ')[0]),
                        datasets: [{
                            label: 'Nilai Akhir',
                            data: nilaiData,
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        scales: {
                            y: {beginAtZero: true, max: 100}
                        }
                    }
                });
                
                // Chart 3: Absensi
                const attendance = JSON.parse(localStorage.getItem('attendance'));
                const absensiData = students.map(s => attendance[s.username].persentase);
                
                new Chart(document.getElementById('chartAbsensi'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Hadir 90-100%', 'Hadir 80-89%', 'Hadir <80%'],
                        datasets: [{
                            data: [
                                absensiData.filter(p => p >= 90).length,
                                absensiData.filter(p => p >= 80 && p < 90).length,
                                absensiData.filter(p => p < 80).length
                            ],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(251, 191, 36, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true
                    }
                });
                
                // Chart 4: Nilai Per Materi
                const babAvg = [];
                for(let i = 0; i < 8; i++) {
                    const avg = students.reduce((sum, s) => sum + scores[s.username].quizzes[i], 0) / students.length;
                    babAvg.push(Math.round(avg));
                }
                
                new Chart(document.getElementById('chartNilaiPerMateri'), {
                    type: 'radar',
                    data: {
                        labels: ['Bab 1', 'Bab 2', 'Bab 3', 'Bab 4', 'Bab 5', 'Bab 6', 'Bab 7', 'Bab 8'],
                        datasets: [{
                            label: 'Rata-rata Nilai',
                            data: babAvg,
                            backgroundColor: 'rgba(168, 85, 247, 0.2)',
                            borderColor: 'rgb(168, 85, 247)',
                            pointBackgroundColor: 'rgb(168, 85, 247)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }, 100);
        }

        // Load Students Table
        function loadStudentsTable() {
            const scores = JSON.parse(localStorage.getItem('studentScores'));
            let students = SYSTEM_DATA.students;
            if(currentFilter !== 'all') {
                students = students.filter(s => s.kelas === currentFilter);
            }
            
            let html = `
                <div class="mb-4 flex justify-between items-center">
                    <h3 class="text-xl font-bold">Data Nilai Siswa</h3>
                    <button onclick="exportCSV()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold transition">
                        
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-3 text-left">No</th>
                                <th class="px-4 py-3 text-left">Nama</th>
                                <th class="px-4 py-3 text-left">Kelas</th>
                                <th class="px-4 py-3 text-center">Pretest</th>
                                <th class="px-4 py-3 text-center">RataÂ² Kuis</th>
                                <th class="px-4 py-3 text-center">Posttest</th>
                                <th class="px-4 py-3 text-center">Nilai Akhir</th>
                                <th class="px-4 py-3 text-center">Status</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
            `;
            
            students.forEach((student, index) => {
                const score = scores[student.username];
                const avgQuiz = Math.round(score.quizzes.reduce((a,b) => a+b, 0) / 8);
                const statusColor = score.status === 'Lulus' ? 'text-green-600' : 'text-red-600';
                
                html += `
                    <tr class="hover:bg-gray-50">
                        <td class="px-4 py-3">${index + 1}</td>
                        <td class="px-4 py-3 font-medium">${student.nama}</td>
                        <td class="px-4 py-3">${student.kelas}</td>
                        <td class="px-4 py-3 text-center">${score.pretest}</td>
                        <td class="px-4 py-3 text-center">${avgQuiz}</td>
                        <td class="px-4 py-3 text-center">${score.posttest}</td>
                        <td class="px-4 py-3 text-center font-bold">${score.finalScore}</td>
                        <td class="px-4 py-3 text-center font-semibold ${statusColor}">${score.status}</td>
                    </tr>
                `;
            });
            
            html += '</tbody></table></div>';
            document.getElementById('studentsTableContent').innerHTML = html;
        }

        // 
        function exportCSV() {
            const scores = JSON.parse(localStorage.getItem('studentScores'));
            let students = SYSTEM_DATA.students;
            if(currentFilter !== 'all') {
                students = students.filter(s => s.kelas === currentFilter);
            }
            
            let csv = 'No,Nama,Kelas,Pretest,Rata-rata Kuis,Posttest,Nilai Akhir,Status\n';
            students.forEach((student, index) => {
                const score = scores[student.username];
                const avgQuiz = Math.round(score.quizzes.reduce((a,b) => a+b, 0) / 8);
                csv += `${index + 1},${student.nama},${student.kelas},${score.pretest},${avgQuiz},${score.posttest},${score.finalScore},${score.status}\n`;
            });
            
            const blob = new Blob([csv], {type: 'text/csv'});
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `data_nilai_${currentFilter}.csv`;
            a.click();
        }

        // Load Absensi
        function loadAbsensi() {
            const attendance = JSON.parse(localStorage.getItem('attendance'));
            let students = SYSTEM_DATA.students;
            if(currentFilter !== 'all') {
                students = students.filter(s => s.kelas === currentFilter);
            }
            
            let html = `
                <div class="mb-4 flex justify-between items-center">
                    <h3 class="text-xl font-bold">Rekap Kehadiran Siswa</h3>
                    <button onclick="exportAbsensiCSV()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold transition">
                        ğŸ“¥ Export Absensi CSV
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-3 text-left">No</th>
                                <th class="px-4 py-3 text-left">Nama</th>
                                <th class="px-4 py-3 text-left">Kelas</th>
                                <th class="px-4 py-3 text-center">Hadir</th>
                                <th class="px-4 py-3 text-center">Izin</th>
                                <th class="px-4 py-3 text-center">Sakit</th>
                                <th class="px-4 py-3 text-center">Alpha</th>
                                <th class="px-4 py-3 text-center">Persentase</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
            `;
            
            students.forEach((student, index) => {
                const att = attendance[student.username];
                const persentaseColor = att.persentase >= 90 ? 'text-green-600' : att.persentase >= 80 ? 'text-yellow-600' : 'text-red-600';
                
                html += `
                    <tr class="hover:bg-gray-50">
                        <td class="px-4 py-3">${index + 1}</td>
                        <td class="px-4 py-3 font-medium">${student.nama}</td>
                        <td class="px-4 py-3">${student.kelas}</td>
                        <td class="px-4 py-3 text-center">${att.hadir}</td>
                        <td class="px-4 py-3 text-center">${att.izin}</td>
                        <td class="px-4 py-3 text-center">${att.sakit}</td>
                        <td class="px-4 py-3 text-center">${att.alpha}</td>
                        <td class="px-4 py-3 text-center font-bold ${persentaseColor}">${att.persentase}%</td>
                    </tr>
                `;
            });
            
            html += '</tbody></table></div>';
            document.getElementById('absensiContent').innerHTML = html;
        }

        // Export Absensi CSV
        function exportAbsensiCSV() {
            const attendance = JSON.parse(localStorage.getItem('attendance'));
            let students = SYSTEM_DATA.students;
            if(currentFilter !== 'all') {
                students = students.filter(s => s.kelas === currentFilter);
            }
            
            let csv = 'No,Nama,Kelas,Hadir,Izin,Sakit,Alpha,Persentase\n';
            students.forEach((student, index) => {
                const att = attendance[student.username];
                csv += `${index + 1},${student.nama},${student.kelas},${att.hadir},${att.izin},${att.sakit},${att.alpha},${att.persentase}%\n`;
            });
            
            const blob = new Blob([csv], {type: 'text/csv'});
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `absensi_${currentFilter}.csv`;
            a.click();
        }

        // Load Feedbacks View
        function loadFeedbacksView() {
            const feedbacks = JSON.parse(localStorage.getItem('feedbacks') || '[]');
            // Statistics (robust against null/empty/legacy data)
            const allFeedbacks = Array.isArray(feedbacks) ? feedbacks : [];
            let filteredFeedbacks = allFeedbacks;
            if (currentFilter !== 'all') {
                filteredFeedbacks = allFeedbacks.filter(f => f && f.kelas === currentFilter);
            }
            // Support both legacy 'rating' and newer 'scale.satisfaction'
            const ratings = filteredFeedbacks
                .map(f => {
                    if (!f) return NaN;
                    if (typeof f.rating !== 'undefined') return Number(f.rating);
                    if (f.scale && typeof f.scale.satisfaction !== 'undefined') return Number(f.scale.satisfaction);
                    return NaN;
                })
                .filter(n => Number.isFinite(n) && n > 0);
            const avgRating = ratings.length ? (ratings.reduce((a,b)=>a+b,0) / ratings.length).toFixed(1) : '0.0';
            
            const babFavoritCount = {};
            const babSulitCount = {};
            
            filteredFeedbacks.forEach(f => {
                babFavoritCount[f.babFavorit] = (babFavoritCount[f.babFavorit] || 0) + 1;
                babSulitCount[f.babSulit] = (babSulitCount[f.babSulit] || 0) + 1;
            });
            
            const topFavorit = Object.entries(babFavoritCount).sort((a,b) => b[1] - a[1])[0];
            const topSulit = Object.entries(babSulitCount).sort((a,b) => b[1] - a[1])[0];
            
            let html = `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-xl p-6 text-white">
                        <p class="text-sm opacity-90">Rating Rata-rata</p>
                        <p class="text-4xl font-bold mt-2">${avgRating} â­</p>
                    </div>
                    <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white">
                        <p class="text-sm opacity-90">Bab Favorit</p>
                        <p class="text-2xl font-bold mt-2">${topFavorit ? topFavorit[0] : '-'}</p>
                    </div>
                    <div class="bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white">
                        <p class="text-sm opacity-90">Bab Tersulit</p>
                        <p class="text-2xl font-bold mt-2">${topSulit ? topSulit[0] : '-'}</p>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <h3 class="text-xl font-bold mb-4">ğŸ’¬ Feedback dari Siswa (${filteredFeedbacks.length} feedback)</h3>
            `;
            
            filteredFeedbacks.forEach(feedback => {
                html += `
                    <div class="bg-white border rounded-xl p-6 hover:shadow-lg transition">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="font-bold text-lg">${feedback.nama}</p>
                                <p class="text-sm text-gray-600">${feedback.kelas} â€¢ ${feedback.tanggal}</p>
                            </div>
                            <div class="text-yellow-500 text-xl">
                                ${'â­'.repeat(feedback.rating)}
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-4 text-sm">
                            <div>
                                <span class="text-gray-600">Bab Favorit:</span>
                                <span class="font-semibold ml-2">${feedback.babFavorit}</span>
                            </div>
                            <div>
                                <span class="text-gray-600">Bab Sulit:</span>
                                <span class="font-semibold ml-2">${feedback.babSulit}</span>
                            </div>
                        </div>
                        <p class="text-gray-700 italic">"${feedback.komentar}"</p>
                    </div>
                `;
            });
            
            html += '</div>';
            document.getElementById('feedbacksContent').innerHTML = html;
        }

        // ============ FITUR BARU: KELOLA SISWA ============
        function loadKelolaSiswa() {
            let students = SYSTEM_DATA.students;
            if(currentFilter !== 'all') {
                students = students.filter(s => s.kelas === currentFilter);
            }
            
            let html = `
                <div class="space-y-6">
                    <!-- Form Tambah Siswa -->
                    <div class="bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 text-white shadow-lg">
                        <h3 class="text-2xl font-bold mb-4 flex items-center">
                            <span class="bg-white text-blue-600 rounded-full w-10 h-10 flex items-center justify-center mr-3">â•</span>
                            Tambah Siswa Baru
                        </h3>
                        <form onsubmit="tambahSiswaBaru(event)" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Nama Lengkap *</label>
                                <input type="text" name="nama" required 
                                    class="w-full px-4 py-2 rounded-lg text-gray-800 focus:ring-2 focus:ring-white"
                                    placeholder="Contoh: Ahmad Rizki">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Kelas *</label>
                                <select name="kelas" required class="w-full px-4 py-2 rounded-lg text-gray-800">
                                    <option value="VIIIa">Kelas 8A</option>
                                    <option value="VIIIb">Kelas 8B</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Username *</label>
                                <input type="text" name="username" required 
                                    class="w-full px-4 py-2 rounded-lg text-gray-800 focus:ring-2 focus:ring-white"
                                    placeholder="Contoh: ahmad_viiia">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Password *</label>
                                <input type="text" name="password" required 
                                    class="w-full px-4 py-2 rounded-lg text-gray-800 focus:ring-2 focus:ring-white"
                                    placeholder="Minimal 6 karakter" minlength="6">
                            </div>
                            <div class="md:col-span-2">
                                <button type="submit" class="w-full bg-white text-blue-600 py-3 rounded-lg font-bold hover:bg-blue-50 transition shadow-md">
                                    âœ… Tambah Siswa
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Daftar Siswa -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold">ğŸ‘¥ Daftar Siswa (${students.length} siswa)</h3>
                            <span class="px-4 py-2 bg-blue-100 text-blue-800 rounded-lg font-semibold text-sm">
                                Total: ${SYSTEM_DATA.students.length} siswa
                            </span>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-100">
                                    <tr>
                                        <th class="px-4 py-3 text-left">No</th>
                                        <th class="px-4 py-3 text-left">Nama</th>
                                        <th class="px-4 py-3 text-left">Kelas</th>
                                        <th class="px-4 py-3 text-left">Username</th>
                                        <th class="px-4 py-3 text-center">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y">
            `;
            
            students.forEach((student, index) => {
                html += `
                    <tr class="hover:bg-gray-50 transition">
                        <td class="px-4 py-3">${index + 1}</td>
                        <td class="px-4 py-3 font-medium">${student.nama}</td>
                        <td class="px-4 py-3">
                            <span class="px-3 py-1 rounded-full text-xs font-semibold ${student.kelas === 'VIIIa' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'}">
                                ${student.kelas === 'VIIIa' ? '8A' : '8B'}
                            </span>
                        </td>
                        <td class="px-4 py-3">
                            <code class="bg-gray-100 px-2 py-1 rounded text-sm">${student.username}</code>
                        </td>
                        <td class="px-4 py-3 text-center">
                            <button onclick="hapusSiswa('${student.username}', '${student.nama}')" 
                                class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-semibold transition shadow-sm">
                                ğŸ—‘ï¸ Hapus
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            html += `
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Informasi Penting -->
                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg shadow-sm">
                        <div class="flex items-start">
                            <span class="text-2xl mr-3">âš ï¸</span>
                            <div>
                                <p class="font-semibold text-yellow-800 mb-2">Perhatian Penting:</p>
                                <ul class="text-sm text-yellow-700 space-y-1">
                                    <li>â€¢ Username harus unik dan tidak boleh sama dengan siswa lain</li>
                                    <li>â€¢ Password minimal 6 karakter untuk keamanan</li>
                                    <li>â€¢ Menghapus siswa akan menghapus SEMUA data nilai, absensi, dan badge</li>
                                    <li>â€¢ Data yang sudah dihapus TIDAK DAPAT dikembalikan</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('kelolaSiswaContent').innerHTML = html;
        }

        // Fungsi Tambah Siswa Baru
        function tambahSiswaBaru(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const newStudent = {
                username: formData.get('username').trim(),
                password: formData.get('password'),
                nama: formData.get('nama').trim().toUpperCase(),
                kelas: formData.get('kelas'),
                gender: 'L' // default
            };
            
            // Validasi username unik
            const existingStudent = SYSTEM_DATA.students.find(s => s.username.toLowerCase() === newStudent.username.toLowerCase());
            if(existingStudent) {
                alert('âŒ Username sudah digunakan!\n\nSilakan gunakan username lain.');
                return;
            }
            
            // Validasi password minimal 6 karakter
            if(newStudent.password.length < 6) {
                alert('âŒ Password minimal 6 karakter!');
                return;
            }
            
            try {
                // Tambah ke SYSTEM_DATA
                SYSTEM_DATA.students.push(newStudent);
                
                // Initialize data nilai (dengan null safety)
                let scores = localStorage.getItem('studentScores');
                scores = scores ? JSON.parse(scores) : {};
                scores[newStudent.username] = {
                    pretest: 0,
                    quizzes: [0, 0, 0, 0, 0, 0, 0, 0],
                    posttest: 0,
                    finalScore: 0,
                    status: 'Belum Lulus',
                    completedBabs: [],
                    xp: 0,
                    certificates: []
                };
                localStorage.setItem('studentScores', JSON.stringify(scores));
                
                // Initialize data absensi (dengan null safety)
                let attendance = localStorage.getItem('attendance');
                attendance = attendance ? JSON.parse(attendance) : {};
                attendance[newStudent.username] = {
                    records: [],
                    hadir: 0,
                    izin: 0,
                    sakit: 0,
                    alpha: 0,
                    persentase: 0
                };
                localStorage.setItem('attendance', JSON.stringify(attendance));
                
                // Initialize badges (dengan null safety)
                let badges = localStorage.getItem('badges');
                badges = badges ? JSON.parse(badges) : {};
                badges[newStudent.username] = [];
                localStorage.setItem('badges', JSON.stringify(badges));
                
                // PENTING: Simpan students ke localStorage agar permanen
                localStorage.setItem('students', JSON.stringify(SYSTEM_DATA.students));
                
                alert('âœ… Siswa berhasil ditambahkan!\n\n' +
                      'Nama: ' + newStudent.nama + '\n' +
                      'Username: ' + newStudent.username + '\n' +
                      'Kelas: ' + (newStudent.kelas === 'VIIIa' ? '8A' : '8B') + '\n\n' +
                      'ğŸ’¾ Data tersimpan permanen!');
                
                event.target.reset();
                loadKelolaSiswa();
            } catch(error) {
                console.error('Error saat menambah siswa:', error);
                alert('âŒ Terjadi kesalahan saat menambah siswa!\n\nError: ' + error.message);
            }
        }

        // Fungsi Hapus Siswa
        function hapusSiswa(username, nama) {
            const confirmed = confirm(
                'âš ï¸ PERINGATAN KERAS!\n\n' +
                'Apakah Anda yakin ingin menghapus siswa:\n' +
                nama + ' (' + username + ')?\n\n' +
                'ğŸš¨ SEMUA DATA AKAN DIHAPUS:\n' +
                'â€¢ Data Nilai (Pretest, Quiz, Posttest)\n' +
                'â€¢ Data Absensi\n' +
                'â€¢ Badge & Achievement\n' +
                'â€¢ Data Login\n\n' +
                'Data yang dihapus TIDAK DAPAT dikembalikan!\n\n' +
                'Ketik OK untuk melanjutkan.'
            );
            
            if(!confirmed) return;
            
            try {
                // Hapus dari SYSTEM_DATA.students
                const index = SYSTEM_DATA.students.findIndex(s => s.username === username);
                if(index > -1) {
                    SYSTEM_DATA.students.splice(index, 1);
                }
                
                // Hapus dari scores (dengan null safety)
                let scores = localStorage.getItem('studentScores');
                if(scores) {
                    scores = JSON.parse(scores);
                    delete scores[username];
                    localStorage.setItem('studentScores', JSON.stringify(scores));
                }
                
                // Hapus dari attendance (dengan null safety)
                let attendance = localStorage.getItem('attendance');
                if(attendance) {
                    attendance = JSON.parse(attendance);
                    delete attendance[username];
                    localStorage.setItem('attendance', JSON.stringify(attendance));
                }
                
                // Hapus dari badges (dengan null safety)
                let badges = localStorage.getItem('badges');
                if(badges) {
                    badges = JSON.parse(badges);
                    delete badges[username];
                    localStorage.setItem('badges', JSON.stringify(badges));
                }
                
                // PENTING: Update students di localStorage agar permanen
                localStorage.setItem('students', JSON.stringify(SYSTEM_DATA.students));
                
                alert('âœ… Siswa berhasil dihapus!\n\n' + nama + ' telah dihapus dari sistem.\n\nğŸ’¾ Data tersimpan permanen!');
                loadKelolaSiswa();
            } catch(error) {
                console.error('Error saat menghapus siswa:', error);
                alert('âŒ Terjadi kesalahan saat menghapus siswa!\n\nError: ' + error.message);
            }
        }

        // ============ INSIGHT OTOMATIS UNTUK GRAFIK ============
        // Modifikasi loadAnalytics untuk menambahkan insight
        const originalLoadAnalytics = loadAnalytics;
        loadAnalytics = function() {
            originalLoadAnalytics();
            
            // Wait for charts to render, then add insights
            setTimeout(() => {
                generateInsights();
            }, 200);
        };

        function generateInsights() {
            const scores = JSON.parse(localStorage.getItem('studentScores'));
            let students = SYSTEM_DATA.students;
            if(currentFilter !== 'all') {
                students = students.filter(s => s.kelas === currentFilter);
            }
            
            // ===== INSIGHT 1: Pretest vs Posttest =====
            const pretestData = students.map(s => scores[s.username].pretest);
            const posttestData = students.map(s => scores[s.username].posttest);
            const avgPretest = (pretestData.reduce((a,b) => a+b, 0) / pretestData.length).toFixed(1);
            const avgPosttest = (posttestData.reduce((a,b) => a+b, 0) / posttestData.length).toFixed(1);
            const improvement = (avgPosttest - avgPretest).toFixed(1);
            const improvementPercent = ((improvement / avgPretest) * 100).toFixed(1);
            const studentsImproved = posttestData.filter((val, i) => val > pretestData[i]).length;
            
            let insightPretest = `Rata-rata nilai meningkat dari <b>${avgPretest}</b> (pretest) menjadi <b>${avgPosttest}</b> (posttest), `;
            insightPretest += `dengan peningkatan <b>${improvement} poin (${improvementPercent}%)</b>. `;
            insightPretest += `Sebanyak <b>${studentsImproved} dari ${students.length} siswa (${((studentsImproved/students.length)*100).toFixed(0)}%)</b> mengalami peningkatan nilai. `;
            
            if(improvementPercent > 20) {
                insightPretest += `ğŸ‰ <span class="text-green-600 font-semibold">Peningkatan sangat signifikan!</span>`;
            } else if(improvementPercent > 10) {
                insightPretest += `âœ… <span class="text-blue-600 font-semibold">Peningkatan baik!</span>`;
            } else {
                insightPretest += `âš ï¸ <span class="text-orange-600 font-semibold">Perlu strategi pembelajaran tambahan.</span>`;
            }
            
            document.getElementById('insightPretest').innerHTML = insightPretest;
            
            // ===== INSIGHT 2: Distribusi Nilai =====
            const nilaiData = students.map(s => scores[s.username].finalScore);
            const avgNilai = (nilaiData.reduce((a,b) => a+b, 0) / nilaiData.length).toFixed(1);
            const maxNilai = Math.max(...nilaiData);
            const minNilai = Math.min(...nilaiData);
            const nilaiTinggi = nilaiData.filter(n => n >= 80).length;
            const nilaiRendah = nilaiData.filter(n => n < 60).length;
            const topStudent = students[nilaiData.indexOf(maxNilai)].nama.split(' ')[0];
            
            let insightDistribusi = `Nilai akhir rata-rata kelas <b>${avgNilai}</b> dengan rentang <b>${minNilai}-${maxNilai}</b>. `;
            insightDistribusi += `<b>${nilaiTinggi} siswa (${((nilaiTinggi/students.length)*100).toFixed(0)}%)</b> memiliki nilai â‰¥80. `;
            
            if(nilaiRendah > 0) {
                insightDistribusi += `Terdapat <b>${nilaiRendah} siswa</b> dengan nilai <60 yang perlu bimbingan khusus. `;
            }
            
            insightDistribusi += `Nilai tertinggi: <b>${topStudent} (${maxNilai})</b>. `;
            
            if(avgNilai >= 80) {
                insightDistribusi += `ğŸ† <span class="text-green-600 font-semibold">Performa sangat baik!</span>`;
            } else if(avgNilai >= 70) {
                insightDistribusi += `ğŸ‘ <span class="text-blue-600 font-semibold">Performa cukup baik.</span>`;
            } else {
                insightDistribusi += `ğŸ“š <span class="text-orange-600 font-semibold">Perlu peningkatan.</span>`;
            }
            
            document.getElementById('insightDistribusi').innerHTML = insightDistribusi;
            
            // ===== INSIGHT 3: Absensi =====
            const attendance = JSON.parse(localStorage.getItem('attendance'));
            const absensiData = students.map(s => attendance[s.username].persentase);
            const avgAbsensi = (absensiData.reduce((a,b) => a+b, 0) / absensiData.length).toFixed(1);
            const absensiSangatBaik = absensiData.filter(p => p >= 90).length;
            const absensiBaik = absensiData.filter(p => p >= 80 && p < 90).length;
            const absensiKurang = absensiData.filter(p => p < 80).length;
            
            let insightAbsensi = `Rata-rata kehadiran kelas <b>${avgAbsensi}%</b>. `;
            insightAbsensi += `Distribusi: <b>${absensiSangatBaik} siswa</b> (â‰¥90%), <b>${absensiBaik} siswa</b> (80-89%), <b>${absensiKurang} siswa</b> (<80%). `;
            
            if(absensiKurang > 0) {
                insightAbsensi += `âš ï¸ <span class="text-orange-600 font-semibold">${absensiKurang} siswa perlu ditindaklanjuti.</span> `;
            }
            
            if(avgAbsensi >= 90) {
                insightAbsensi += `âœ… <span class="text-green-600 font-semibold">Tingkat kehadiran sangat baik!</span>`;
            } else if(avgAbsensi >= 80) {
                insightAbsensi += `ğŸ‘ <span class="text-blue-600 font-semibold">Tingkat kehadiran cukup baik.</span>`;
            } else {
                insightAbsensi += `ğŸ“¢ <span class="text-red-600 font-semibold">Perlu peningkatan kedisiplinan.</span>`;
            }
            
            document.getElementById('insightAbsensi').innerHTML = insightAbsensi;
            
            // ===== INSIGHT 4: Nilai Per Materi =====
            const babAvg = [];
            for(let i = 0; i < 8; i++) {
                const avg = students.reduce((sum, s) => sum + scores[s.username].quizzes[i], 0) / students.length;
                babAvg.push(Math.round(avg));
            }
            
            const maxBabValue = Math.max(...babAvg);
            const minBabValue = Math.min(...babAvg);
            const maxBabIndex = babAvg.indexOf(maxBabValue) + 1;
            const minBabIndex = babAvg.indexOf(minBabValue) + 1;
            const avgAllBab = (babAvg.reduce((a,b) => a+b, 0) / babAvg.length).toFixed(1);
            
            let insightMateri = `Rata-rata nilai seluruh materi <b>${avgAllBab}</b>. `;
            insightMateri += `Materi paling dikuasai: <b>Bab ${maxBabIndex} (${maxBabValue})</b>, `;
            insightMateri += `materi tersulit: <b>Bab ${minBabIndex} (${minBabValue})</b>. `;
            
            const selisih = maxBabValue - minBabValue;
            if(selisih > 20) {
                insightMateri += `ğŸ“Š <span class="text-orange-600 font-semibold">Kesenjangan ${selisih} poin. Fokus pada Bab ${minBabIndex}.</span>`;
            } else if(selisih > 10) {
                insightMateri += `ğŸ“š <span class="text-blue-600 font-semibold">Pemahaman cukup merata.</span>`;
            } else {
                insightMateri += `ğŸ¯ <span class="text-green-600 font-semibold">Pemahaman sangat merata!</span>`;
            }
            
            document.getElementById('insightMateri').innerHTML = insightMateri;
        }
    </script>

<!-- === QA MODAL (Injected) === -->
<style>
#qa-modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:99999}
#qa-modal .qa-card{background:#fff;max-width:980px;width:96%;max-height:90vh;overflow:auto;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.3)}
.qa-h{padding:14px 18px;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center}
.qa-b{padding:16px}
.qa-x{background:#ef4444;color:#fff;border:none;border-radius:8px;padding:6px 10px;cursor:pointer}
.qa-q{border:1px solid #e5e7eb;border-radius:12px;padding:10px;margin-bottom:10px}
.qa-radio{display:flex;gap:8px;align-items:center;border:1px solid #e5e7eb;border-radius:10px;padding:8px;margin:4px 0}
.qa-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:8px}
.qa-pill{display:inline-block;padding:2px 8px;border-radius:999px;font-weight:700}
.qa-btn{background:#0f172a;color:#fff;border:none;border-radius:12px;padding:10px 14px;cursor:pointer;font-weight:700}

        .fade-soft{animation:fadeIn .5s ease-out both}
        .hover-rise:hover{transform:translateY(-2px); transition:transform .2s ease}
        </style>
        

<div id="qa-modal">
  <div class="qa-card">
    <div class="qa-h">
      <div id="qa-title" style="font-weight:800;font-size:18px;color:#0f172a">Kuis</div>
      <button class="qa-x" onclick="QA.close()">Tutup</button>
    </div>
    <div class="qa-b" id="qa-body"></div>
  </div>
</div>

<script>
(function(){
  // gunakan quizBank yang sudah ada di SYSTEM_DATA
  const QUIZ = {
    pretest: (SYSTEM_DATA && SYSTEM_DATA.quizBank && SYSTEM_DATA.quizBank.pretest) ? SYSTEM_DATA.quizBank.pretest : [],
    posttest: (SYSTEM_DATA && SYSTEM_DATA.quizBank && SYSTEM_DATA.quizBank.posttest) ? SYSTEM_DATA.quizBank.posttest : []
  };
  const KEY_SCORES = 'elearn_scores';
  window.QA = {
    open(kind){ const m=document.getElementById('qa-modal'); m.style.display='flex'; renderQuiz(kind); },
    close(){ document.getElementById('qa-modal').style.display='none'; document.getElementById('qa-body').innerHTML=''; }
  };
  function renderQuiz(kind){
    const title = kind==='pretest'?'Pretest (50 Soal)':'Posttest (50 Soal)';
    document.getElementById('qa-title').textContent = title;
    const items = QUIZ[kind] || [];
    const body = document.getElementById('qa-body');
    body.innerHTML = `
      <div class="qa-grid" style="margin-bottom:10px">
        <div><label>Nama</label><input id="qa-nama" style="width:100%;padding:8px;border:1px solid #e5e7eb;border-radius:8px"></div>
        <div><label>Kelas</label><input id="qa-kelas" style="width:100%;padding:8px;border:1px solid #e5e7eb;border-radius:8px"></div>
        <div><label>KKM</label><input id="qa-kkm" type="number" value="75" style="width:100%;padding:8px;border:1px solid #e5e7eb;border-radius:8px"></div>
      </div>
      <div id="qa-quiz"></div>
      <div style="margin-top:12px">
        <button class="qa-btn" onclick="QA_submit(kindVar)">Kumpulkan Jawaban</button>
      </div>
      <div id="qa-result" style="margin-top:10px"></div>
    `.replace('kindVar', kind);
    const q = document.getElementById('qa-quiz');
    q.innerHTML = items.map((it, i)=>`
      <div class="qa-q">
        <div style="font-weight:700;margin-bottom:4px">No. ${i+1} â€” ${it.soal}</div>
        ${it.pilihan.map((op,j)=>`
          <label class="qa-radio">
            <input type="radio" name="qa-q${i}" value="${j}" required>
            <span>${String.fromCharCode(65+j)}. ${op}</span>
          </label>
        `).join('')}
      </div>
    `).join('');
    window.QA_submit = (k) => {
      const answers = [];
      for(let i=0;i<items.length;i++){
        const r = document.querySelector('input[name="qa-q'+i+'"]:checked');
        answers.push(r ? parseInt(r.value,10) : -1);
      }
      let benar=0; const review=[];
      items.forEach((it,i)=>{
        const idx = answers[i];
        const ok  = idx===it.jawaban;
        if(ok) benar++;
        review.push({i,soal:it.soal,pilih:idx,kunci:it.jawaban,opsi:it.pilihan});
      });
      const skor = Math.round((benar/items.length)*100);
      const nama = (document.getElementById('qa-nama').value||'').trim()||'-';
      const kelas= (document.getElementById('qa-kelas').value||'').trim()||'-';
      const kkm  = parseInt(document.getElementById('qa-kkm').value||'75',10);
      const lulus= skor>=kkm;
      try{
        const arr = JSON.parse(localStorage.getItem(KEY_SCORES)||'[]');
        arr.push({nama,kelas,kind:k,benar,total:items.length,skor,kkm,lulus,ts:new Date().toISOString()});
        localStorage.setItem(KEY_SCORES, JSON.stringify(arr));
      }catch(e){}
      const res = document.getElementById('qa-result');
      res.innerHTML = `
        <div class="qa-q">
          <div><b>Benar:</b> ${benar}/${items.length} â€¢ <b>Skor:</b> ${skor} â€¢ <b>KKM:</b> ${kkm}</div>
          <div>Status: <span class="qa-pill" style="background:${lulus?'#d1fae5':'#fee2e2'};color:${lulus?'#065f46':'#7f1d1d'}">${lulus?'Lulus':'Tidak Lulus'}</span></div>
          <details style="margin-top:6px">
            <summary style="cursor:pointer;font-weight:700">Pembahasan</summary>
            <div>
              ${review.map((r,idx)=>`
                <div style="border-top:1px dashed #e5e7eb;padding:6px 0">
                  <div><b>No. ${idx+1}</b> â€” ${r.soal}</div>
                  <div>Jawabanmu: ${ r.pilih>=0 ? (String.fromCharCode(65+r.pilih)+'. '+items[i].pilihan[r.pilih]) : '-' }</div>
                  <div>Kunci: <b>${String.fromCharCode(65+r.kunci)}. ${items[i].pilihan[r.kunci]}</b></div>
                </div>
              `).join('')}
            </div>
          </details>
        </div>
      `;
      res.scrollIntoView({behavior:'smooth', block:'center'});
    };
  }
})();
</script>


<script>
// === Normalize attendance to 8 meetings & enhance insights ===
(function(){
  // Normalize attendance localStorage to 8 meetings
  try {
    const KEY = 'attendance';
    const MARK = 'attendance_capped_v8';
    if (!localStorage.getItem(MARK)) {
      const data = JSON.parse(localStorage.getItem(KEY) || '{}');
      const capped = {};
      const P = 8;
      for (const u in data) {
        const rec = Array.isArray(data[u].records) ? data[u].records.slice(0, P) : [];
        const count = (val) => rec.filter(x => x===val).length;
        const hadir = count('Hadir');
        const izin  = count('Izin');
        const sakit = count('Sakit');
        const alpha = count('Alpha');
        const persentase = Math.round((hadir / P) * 100);
        capped[u] = { records: rec, hadir, izin, sakit, alpha, persentase };
      }
      if (Object.keys(capped).length) {
        localStorage.setItem(KEY, JSON.stringify(capped));
      }
      localStorage.setItem(MARK, '1');
      console.log('[Normalize] Absensi dicapping ke 8 pertemuan');
    }
  } catch(e){ console.warn('normalize attendance error', e); }

  // Enrich insights with positive action-oriented narratives
  function enhanceInsights(){
    try {
      const get = id => document.getElementById(id);
      // Gather aggregates if available
      const students = (window.SYSTEM_DATA && SYSTEM_DATA.students) ? SYSTEM_DATA.students : [];
      const scores = JSON.parse(localStorage.getItem('studentScores')||'{}');
      const attendance = JSON.parse(localStorage.getItem('attendance')||'{}');
      const arr = students.map(s => (scores[s.username]||{pretest:0,posttest:0,finalScore:0,quizzes:[]}));
      const avg = a => a.length ? a.reduce((x,y)=>x+y,0)/a.length : 0;
      const pre = arr.map(o=>o.pretest), post = arr.map(o=>o.posttest), finals = arr.map(o=>o.finalScore);
      const avgPre = avg(pre), avgPost = avg(post), imp = avgPost - avgPre;
      const pers = students.map(s => (attendance[s.username]?.persentase||0));
      const avgAbs = avg(pers);
      const unggul = finals.filter(n=>n>=85).length;
      const stabil = finals.filter(n=>n>=70 && n<85).length;

      const extraPre = `
        <br><br><b>Apa artinya?</b> Kenaikan rata-rata sebesar <b>${imp.toFixed(1)} poin</b> menandakan
        pembelajaran berjalan efektif. Jaga momentum dengan <i>microâ€‘practice</i> 5â€“10 menit di awal,
        <b>exit ticket</b> 1â€“2 soal di akhir, dan umpan balik singkat untuk siswa yang peningkatannya belum konsisten.
        <br><b>Aksi cepat:</b> materi â†’ latihan â†’ umpan balik; berikan tantangan bertingkat untuk siswa unggul agar tetap termotivasi.`;

      const extraDist = `
        <br><br><b>Gambaran besar:</b> ${unggul} siswa sudah di zona unggul (â‰¥85) dan ${stabil} siswa stabil (70â€“84).
        Ini menunjukkan <b>fondasi kompetensi semakin kuat</b> dan siap diakselerasi.
        <br><b>Penguatan positif:</b> projek mini terapan untuk kelompok unggul dan <i>guided practice</i> ringkas untuk kelompok yang masih butuh dorongan.`;

      const extraAbs = `
        <br><br><b>Makna positif:</b> Rata-rata kehadiran <b>${avgAbs.toFixed(1)}%</b> (maks. 8 pertemuan) menunjukkan budaya disiplin yang menguat.
        Pertahankan reminder kelas dan <b>reward sederhana</b> (badge/XP) agar tren positif terjaga.`;

      const extraMat = `
        <br><br><b>Kesimpulan:</b> Sebaran capaian per bab makin merata.
        <br><b>Strategi ke depan:</b> gunakan <i>spiral review</i> untuk konsep kunci dan latih transfer pengetahuan lewat tugas singkat aplikasi dunia nyata.`;

      const targets = [
        ['insightPretest', extraPre],
        ['insightDistribusi', extraDist],
        ['insightAbsensi', extraAbs],
        ['insightMateri', extraMat]
      ];

      // Primary: append to known insight containers
      targets.forEach(([id, txt]) => {
        const el = get(id);
        if (el) el.innerHTML = (el.innerHTML||'') + txt;
      });

      // Fallback: append to any element with id starting by 'insight'
      document.querySelectorAll('[id^="insight"]').forEach(el => {
        if (!targets.find(t => t[0]===el.id)) {
          el.innerHTML = (el.innerHTML||'') + extraMat;
        }
      });
    } catch(e){ console.warn('enhance insights error', e); }
  }

  // Delay to allow charts to render
  window.addEventListener('load', () => setTimeout(enhanceInsights, 700));
})();
</script>


<!-- === FEEDBACK MODAL + LOGIC === -->
<style>
#fb-modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:99999}
#fb-modal .fb-card{background:#fff;max-width:980px;width:96%;max-height:90vh;overflow:auto;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.3)}
.fb-h{padding:14px 18px;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center}
.fb-b{padding:16px}
.fb-x{background:#ef4444;color:#fff;border:none;border-radius:8px;padding:6px 10px;cursor:pointer}
.fb-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.fb-scale{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
.fb-chip{display:inline-block;padding:2px 8px;border:1px solid #e5e7eb;border-radius:999px;margin:2px}
.fb-table{width:100%;border-collapse:collapse}
.fb-table th,.fb-table td{border:1px solid #e5e7eb;padding:8px;text-align:left}
.fb-btn{background:#0f172a;color:#fff;border:none;border-radius:12px;padding:10px 14px;cursor:pointer;font-weight:700}

        .fade-soft{animation:fadeIn .5s ease-out both}
        .hover-rise:hover{transform:translateY(-2px); transition:transform .2s ease}
        </style>
        

<div id="fb-modal">
  <div class="fb-card">
    <div class="fb-h">
      <div id="fb-title" style="font-weight:800;font-size:18px;color:#0f172a">Form Feedback Siswa</div>
      <button class="fb-x" onclick="FB.close()">Tutup</button>
    </div>
    <div class="fb-b" id="fb-body"></div>
  </div>
</div>

<script>
(function(){
  const KEY='feedbacks';
  const STUDENTS = (window.SYSTEM_DATA && SYSTEM_DATA.students) ? SYSTEM_DATA.students : [];
  const KELAS = Array.from(new Set(STUDENTS.map(s=>s.kelas))).sort();

  function scale(name, label){
    return `
      <div>
        <div style="font-weight:700;margin-bottom:6px">${label} <span style="font-weight:500;color:#64748b">(1 sangat tidak setuju â€“ 5 sangat setuju)</span></div>
        <div class="fb-scale">
          ${[1,2,3,4,5].map(v=>`
            <label class="fb-chip"><input type="radio" name="${name}" value="${v}" required> ${v}</label>
          `).join('')}
        </div>
      </div>
    `;
  }

  function checkbox(name, label, items){
    return `
      <div>
        <div style="font-weight:700;margin-bottom:6px">${label}</div>
        <div class="fb-grid" style="grid-template-columns:repeat(auto-fit,minmax(200px,1fr))">
          ${items.map(it=>`
            <label class="fb-chip"><input type="checkbox" name="${name}" value="${it}"> ${it}</label>
          `).join('')}
        </div>
      </div>
    `;
  }

  function text(name, label, ph=''){
    return `
      <div>
        <div style="font-weight:700;margin-bottom:6px">${label}</div>
        <textarea name="${name}" rows="3" style="width:100%;border:1px solid #e5e7eb;border-radius:10px;padding:8px" placeholder="${ph}"></textarea>
      </div>
    `;
  }

  function inputRow(){
    const kelasOptions = (KELAS.length? KELAS: ['VIIa','VIIb','VIIIa','VIIIb']).map(k=>`<option>${k}</option>`).join('');
    return `
      <div class="fb-grid">
        <div><label>Nama</label><input name="nama" required style="width:100%;padding:8px;border:1px solid #e5e7eb;border-radius:8px"></div>
        <div><label>Kelas</label><select name="kelas" style="width:100%;padding:8px;border:1px solid #e5e7eb;border-radius:8px">${kelasOptions}</select></div>
      </div>
    `;
  }

  window.FB = {
    open(){
      const b = document.getElementById('fb-body');
      b.innerHTML = `
        ${inputRow()}
        <hr style="margin:12px 0;border:none;height:1px;background:#e5e7eb">
        ${scale('clear','Materi jelas & mudah diikuti')}
        ${scale('pace','Kecepatan penyampaian pas')}
        ${scale('engage','Interaktif & melibatkan siswa')}
        ${scale('level','Level kesulitan sesuai')}
        ${scale('ux','Platform mudah digunakan (usability)')}
        ${scale('stable','Stabil (tidak error/crash)')}
        ${scale('speed','Cepat (loading & respons)')}
        ${scale('mobile','Nyaman di HP')}
        ${scale('satisfaction','Kepuasan keseluruhan')}
        <div>
          <div style="font-weight:700;margin-bottom:6px">Seberapa mungkin kamu merekomendasikan kelas ini ke teman? (NPS 0â€“10)</div>
          <div class="fb-scale">
            ${Array.from({length:11},(_,i)=>i).map(v=>`
              <label class="fb-chip"><input type="radio" name="nps" value="${v}" required> ${v}</label>
            `).join('')}
          </div>
        </div>
        ${checkbox('issues','Kendala teknis yang kamu alami (pilih yang relevan):',
           ['Tidak ada','Susah login','Halaman error','Loading lambat','Soal tidak tampil','Nilai tidak tersimpan','Tampilan pecah di HP'])}
        ${text('help','Fitur paling membantu','Contoh: progress, quiz, materi langkah-demi-langkah')}
        ${text('suggest','Saran perbaikan','Contoh: tambah video pendek per materi')}
        ${text('bug','Jika ada bug, jelaskan plus langkah yang memicu','Contoh: klik Lihat Pre-Test â†’ kosong')}
        <div style="margin-top:12px">
          <button class="fb-btn" onclick="FB.submit()">Kirim Feedback</button>
        </div>
      `;
      document.getElementById('fb-modal').style.display='flex';
    },
    close(){ document.getElementById('fb-modal').style.display='none'; },
    submit(){
      const modal = document.getElementById('fb-modal');
      const form = modal.querySelector('.fb-b');
      const getVal = name => {
        const r = form.querySelector(`[name="${name}"]:checked`);
        return r ? parseInt(r.value,10) : null;
      };
      const getChecks = name => Array.from(form.querySelectorAll(`[name="${name}"]:checked`)).map(x=>x.value);
      const getText = name => (form.querySelector(`[name="${name}"]`)?.value||'').trim();

      const data = {
        ts: new Date().toISOString(),
        nama: getText('nama'),
        kelas: form.querySelector('[name="kelas"]').value,
        scale: {
          clear: getVal('clear'),
          pace: getVal('pace'),
          engage: getVal('engage'),
          level: getVal('level'),
          ux: getVal('ux'),
          stable: getVal('stable'),
          speed: getVal('speed'),
          mobile: getVal('mobile'),
          satisfaction: getVal('satisfaction'),
          nps: getVal('nps')
        },
        issues: getChecks('issues'),
        help: getText('help'),
        suggest: getText('suggest'),
        bug: getText('bug')
      };
      if (!data.nama) { alert('Nama wajib diisi'); return; }

      try {
        const arr = JSON.parse(localStorage.getItem(KEY)||'[]');
        arr.push(data);
        localStorage.setItem(KEY, JSON.stringify(arr));
        alert('Terima kasih! Feedback sudah disimpan.');
      } catch(e){ alert('Gagal menyimpan, coba lagi.'); console.warn(e); }
      FB.close();
    }
  };

  // === Teacher-side renderer (if there is container) ===
  document.addEventListener('DOMContentLoaded', ()=>{
    const cont = document.getElementById('feedbackContainer');
    if (!cont) return;
    renderFeedbackSummary(cont);
  });

  window.renderFeedbackSummary = function(cont){ if(cont) cont.innerHTML=''; };;
    arr.forEach(r => (r.issues||[]).forEach(i => issuesCount[i] = (issuesCount[i]||0)+1));

    // Build HTML
    const rows = arr.slice().reverse().map((r,i)=>`
      <tr>
        <td class="p-2 border">${i+1}</td>
        <td class="p-2 border">${r.nama}</td>
        <td class="p-2 border">${r.kelas}</td>
        <td class="p-2 border">${r.scale?.satisfaction??''}</td>
        <td class="p-2 border">${r.scale?.nps??''}</td>
        <td class="p-2 border">${(r.issues||[]).join(', ')}</td>
        <td class="p-2 border">${r.help||''}</td>
        <td class="p-2 border">${r.suggest||''}</td>
        <td class="p-2 border">${new Date(r.ts).toLocaleString('id-ID')}</td>
      </tr>
    `).join('');

    const issuesList = Object.entries(issuesCount).sort((a,b)=>b[1]-a[1]).map(([k,v])=>`<li>${k}: <b>${v}</b></li>`).join('');

    const insight = `
      <p><b>Inti temuan feedback:</b> Rata-rata kepuasan <b>${avgMap.satisfaction.toFixed(2)}</b>/5 dengan NPS <b>${nps}</b>.
      Usability tercatat <b>${avgMap.ux.toFixed(2)}</b>/5 dan stabilitas <b>${avgMap.stable.toFixed(2)}</b>/5.
      Ini menandakan platform <b>cukup matang</b> dan siap ditingkatkan secara bertahap.</p>
      <p><b>Fokus perbaikan terarah:</b> perhatikan item kendala yang paling sering muncul (lihat daftar). 
      Terapkan <i>quick fix</i> untuk hambatan besar (mis. login/loading) dan jadwalkan <i>hardening sprint</i> untuk stabilitas kuis & penyimpanan nilai.</p>
      <p><b>Langkah positif mingguan:</b> (1) review 5â€“10 feedback terbaru, (2) umumkan perbaikan kecil agar siswa merasa didengar, 
      dan (3) lakukan <i>usability test</i> singkat pada tampilan HP untuk menjaga aksesibilitas.</p>
    `;

    cont.innerHTML = `
      <div class="space-y-4">
        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px">
          <div class="p-4 rounded-xl border">
            <div class="text-sm text-slate-500">Rata-rata Kepuasan</div>
            <div class="text-2xl font-bold">${avgMap.satisfaction.toFixed(2)}/5</div>
          </div>
          <div class="p-4 rounded-xl border">
            <div class="text-sm text-slate-500">NPS</div>
            <div class="text-2xl font-bold">${nps}</div>
          </div>
          <div class="p-4 rounded-xl border">
            <div class="text-sm text-slate-500">Usability</div>
            <div class="text-2xl font-bold">${avgMap.ux.toFixed(2)}/5</div>
          </div>
          <div class="p-4 rounded-xl border">
            <div class="text-sm text-slate-500">Stabilitas</div>
            <div class="text-2xl font-bold">${avgMap.stable.toFixed(2)}/5</div>
          </div>
        </div>


  window.exportFeedbackCSV=function(){};

})();
</script>

<!-- === FEEDBACK SUMMARY CONTAINER (Teacher view) === -->
<div id="feedbackContainer" style="max-width:1100px;margin:20px auto"></div>


<!-- Certificate Modal -->
<div id="certModal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(15,23,42,.6);z-index:9999;">
  <div style="width:100%;max-width:680px;background:#fff;border-radius:16px;overflow:hidden;border:1px solid #e5e7eb">
    <div style="padding:16px;background:linear-gradient(135deg,#f5f3ff,#ecfeff);border-bottom:1px solid #e5e7eb">
      <div style="font-weight:800;font-size:18px;color:#0f172a">Sertifikat Kelulusan</div>
      <div style="font-size:12px;color:#475569">Isi data berikut untuk membuat sertifikat</div>
    </div>
    <div style="padding:16px" id="certForm">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div>
          <label style="font-size:12px;color:#475569">Nama Siswa</label>
          <input id="certName" type="text" placeholder="Nama lengkap" style="width:100%;border:1px solid #e2e8f0;border-radius:10px;padding:8px 10px;margin-top:4px">
        </div>
        <div>
          <label style="font-size:12px;color:#475569">Nilai Posttest</label>
          <input id="certScore" type="number" min="0" max="100" placeholder="0-100" style="width:100%;border:1px solid #e2e8f0;border-radius:10px;padding:8px 10px;margin-top:4px">
        </div>
      </div>
      <div style="display:flex;gap:8px;margin-top:12px">
        <button id="certGenerate" style="border:1px solid #e2e8f0;border-radius:10px;padding:8px 12px;font-weight:600">Buat Sertifikat</button>
        <button id="certClose" style="border:1px solid #e2e8f0;border-radius:10px;padding:8px 12px">Tutup</button>
      </div>
      <div id="certWarn" style="margin-top:10px;font-size:12px;color:#b91c1c;display:none">Nilai belum memenuhi KKM.</div>
    </div>
    <div id="certCanvas" style="display:none;padding:24px;background:#fff">
      <div style="border:2px dashed #e5e7eb;border-radius:16px;padding:24px;text-align:center">
        <div style="font-size:12px;color:#475569">Madrasah</div>
        <div style="font-weight:800;font-size:24px;color:#0f172a;margin-top:4px">Eâ€‘Learning Panduan Bimbingan Komputer Dasar</div>
        <div style="margin:18px 0;font-size:28px">ğŸ“</div>
        <div style="font-size:18px;color:#0f172a">Sertifikat Kelulusan</div>
        <div style="font-size:12px;color:#475569">Diberikan kepada</div>
        <div id="certStudent" style="font-weight:800;font-size:22px;color:#111827;margin-top:4px"></div>
        <div style="margin-top:8px;font-size:12px;color:#475569">Telah menyelesaikan pembelajaran Komputer Dasar dengan nilai posttest</div>
        <div id="certValue" style="font-weight:800;font-size:22px;color:#111827;margin-top:4px"></div>
        <div style="margin-top:16px;font-size:12px;color:#475569">Tanggal</div>
        <div id="certDate" style="font-size:14px;color:#111827"></div>
        <div style="margin-top:20px;display:flex;justify-content:center;gap:40px">
          <div>
            <div style="height:1px;background:#e5e7eb;margin:26px 0 6px"></div>
            <div style="font-size:12px;color:#475569">Guru Pembimbing</div>
          </div>
          <div>
            <div style="height:1px;background:#e5e7eb;margin:26px 0 6px"></div>
            <div style="font-size:12px;color:#475569">Kepala Madrasah</div>
          </div>
        </div>
        <div style="margin-top:16px">
          <button onclick="window.print()" style="border:1px solid #e2e8f0;border-radius:10px;padding:8px 12px;font-weight:600">Print / Simpan PDF</button>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
(function(){
  var modal = document.getElementById('certModal');
  var btnClose = document.getElementById('certClose');
  var btnGen = document.getElementById('certGenerate');
  var inputName = document.getElementById('certName');
  var inputScore = document.getElementById('certScore');
  var warn = document.getElementById('certWarn');
  var canvas = document.getElementById('certCanvas');
  var form = document.getElementById('certForm');
  var outName = document.getElementById('certStudent');
  var outVal = document.getElementById('certValue');
  var outDate = document.getElementById('certDate');
  var KKM = 75;

  window.openCertificateModal = function(){
    if(!modal) return;
    modal.style.display = 'flex';
    warn.style.display = 'none';
    canvas.style.display = 'none';
    form.style.display = 'block';
    inputName.value = '';
    inputScore.value = '';
  };

  if(btnClose){
    btnClose.addEventListener('click', function(){
      modal.style.display = 'none';
    });
  }

  if(btnGen){
    btnGen.addEventListener('click', function(){
      var name = (inputName && inputName.value || '').trim();
      var score = parseFloat(inputScore && inputScore.value || '0');
      if(!name){ warn.style.display = 'block'; warn.innerText = 'Nama belum diisi.'; return; }
      if(isNaN(score)){ warn.style.display = 'block'; warn.innerText = 'Nilai tidak valid.'; return; }
      if(score < KKM){
        warn.style.display = 'block';
        warn.innerText = 'Nilai belum memenuhi KKM ('+KKM+').';
        return;
      }
      // OK generate
      outName.innerText = name;
      outVal.innerText = score.toFixed(0);
      var d = new Date();
      var tgl = d.getFullYear() + '-' + String(d.getMonth()+1).padStart(2,'0') + '-' + String(d.getDate()).padStart(2,'0');
      outDate.innerText = tgl;
      form.style.display = 'none';
      warn.style.display = 'none';
      canvas.style.display = 'block';
    });
  }

  // Optional: click outside to close
  if(modal){
    modal.addEventListener('click', function(e){
      if(e.target === modal){ modal.style.display = 'none'; }
    });
  }
})();
</script>

</body>
</html>
